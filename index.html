<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูููุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap');
        
        * {
            font-family: 'Tajawal', sans-serif;
        }

        :root {
            --correct-color: #6ca965;
            --present-color: #c8b653;
            --absent-color: #787c7e;
            --default-color: #d3d6da;
            --bg-color: #ffffff;
            --text-color: #000000;
            --border-color: #d3d6da;
            --key-bg: #d3d6da;
            --key-text: #000000;
        }

        .dark-mode {
            --correct-color: #538d4e;
            --present-color: #b59f3b;
            --absent-color: #3a3a3c;
            --default-color: #818384;
            --bg-color: #121213;
            --text-color: #ffffff;
            --border-color: #3a3a3c;
            --key-bg: #818384;
            --key-text: #ffffff;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .tile {
            width: 62px;
            height: 62px;
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            user-select: none;
            transition: all 0.3s ease;
        }

        @media (max-width: 640px) {
            .tile {
                width: 50px;
                height: 50px;
                font-size: 1.8rem;
            }
        }

        @media (max-width: 400px) {
            .tile {
                width: 42px;
                height: 42px;
                font-size: 1.5rem;
            }
        }

        .tile.filled {
            border-color: #878a8c;
            animation: pop 0.1s ease;
        }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .tile.correct {
            background-color: var(--correct-color);
            border-color: var(--correct-color);
            color: white;
        }

        .tile.present {
            background-color: var(--present-color);
            border-color: var(--present-color);
            color: white;
        }

        .tile.absent {
            background-color: var(--absent-color);
            border-color: var(--absent-color);
            color: white;
        }

        .flip {
            animation: flip 0.6s ease;
        }

        @keyframes flip {
            0% { transform: rotateX(0); }
            50% { transform: rotateX(90deg); }
            100% { transform: rotateX(0); }
        }

        .key {
            height: 58px;
            min-width: 44px;
            background-color: var(--key-bg);
            color: var(--key-text);
            border: none;
            border-radius: 4px;
            font-weight: bold;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
        }

        .key:hover {
            opacity: 0.9;
        }

        .key.wide {
            min-width: 65px;
            font-size: 0.8rem;
        }

        .key.correct {
            background-color: var(--correct-color);
            color: white;
        }

        .key.present {
            background-color: var(--present-color);
            color: white;
        }

        .key.absent {
            background-color: var(--absent-color);
            color: white;
        }

        .shake {
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .bounce {
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
        }

        .stats-bar {
            height: 32px;
            background-color: var(--absent-color);
            color: white;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            margin: 2px 0;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header -->
    <header class="flex items-center justify-between px-4 py-3 border-b border-[var(--border-color)]">
        <div class="flex items-center space-x-3 space-x-reverse">
            <button id="helpBtn" class="p-2 hover:bg-[var(--default-color)] rounded-full">
                <i class="fas fa-question-circle text-xl"></i>
            </button>
            <button id="statsBtn" class="p-2 hover:bg-[var(--default-color)] rounded-full">
                <i class="fas fa-chart-bar text-xl"></i>
            </button>
        </div>
        
        <h1 class="text-3xl font-bold tracking-tight text-center flex-1">ููููููุฉ</h1>
        
        <div class="flex items-center space-x-3 space-x-reverse">
            <button id="settingsBtn" class="p-2 hover:bg-[var(--default-color)] rounded-full">
                <i class="fas fa-cog text-xl"></i>
            </button>
            <button id="themeToggle" class="p-2 hover:bg-[var(--default-color)] rounded-full">
                <i class="fas fa-moon text-xl"></i>
            </button>
        </div>
    </header>

    <!-- Game Grid -->
    <main class="flex-grow flex flex-col items-center justify-center py-4 px-2">
        <div id="message" class="h-8 mb-4 text-center font-bold"></div>
        <div id="grid" class="grid grid-rows-6 gap-2 mb-8"></div>
        
        <!-- Keyboard -->
        <div id="keyboard" class="w-full max-w-xl px-2 space-y-2"></div>
    </main>

    <!-- Modals -->
    <div id="helpModal" class="fixed inset-0 modal-overlay z-50 flex items-center justify-center hidden p-4">
        <div class="bg-[var(--bg-color)] border border-[var(--border-color)] rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">ููููุฉ ุงููุนุจ</h2>
                    <button id="closeHelp" class="text-2xl hover:text-[var(--absent-color)]">&times;</button>
                </div>
                
                <p class="mb-4">ุชุฎููู ุงููููุฉ ูู 6 ูุญุงููุงุช</p>
                <p class="mb-6">ุจุนุฏ ูู ุชุฎูููุ ูุชุบูุฑ ููู ุงูุจูุงุทุงุช ููุนุทูู ุชูููุญุงุช</p>
                
                <div class="space-y-4 mb-6">
                    <div class="flex items-center space-x-3 space-x-reverse">
                        <div class="tile correct">ู</div>
                        <p>ุงูุญุฑู <strong>ู</strong> ูู ููุงูู ุงูุตุญูุญ</p>
                    </div>
                    <div class="flex items-center space-x-3 space-x-reverse">
                        <div class="tile present">ุน</div>
                        <p>ุงูุญุฑู <strong>ุน</strong> ููุฌูุฏ ูู ุงููููุฉ ูููู ูู ููุงู ุขุฎุฑ</p>
                    </div>
                    <div class="flex items-center space-x-3 space-x-reverse">
                        <div class="tile absent">ุง</div>
                        <p>ุงูุญุฑู <strong>ุง</strong> ุบูุฑ ููุฌูุฏ ูู ุงููููุฉ</p>
                    </div>
                </div>
                
                <p class="mb-6"><strong>ููุงุญุธุฉ:</strong> ูููู ุฃู ุชุธูุฑ ุงูุญุฑูู ุงููุชุดุงุจูุฉ (ูุซู: ุฃุ ุฅุ ุขุ ุง) ุจุดูู ููุญุฏ</p>
                
                <div class="text-center">
                    <button id="startGameBtn" class="bg-[var(--correct-color)] text-white px-6 py-3 rounded font-bold hover:opacity-90">
                        ุจุฏุก ูุนุจุฉ ุฌุฏูุฏุฉ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="statsModal" class="fixed inset-0 modal-overlay z-50 flex items-center justify-center hidden p-4">
        <div class="bg-[var(--bg-color)] border border-[var(--border-color)] rounded-lg max-w-md w-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">ุงูุฅุญุตุงุฆูุงุช</h2>
                    <button id="closeStats" class="text-2xl hover:text-[var(--absent-color)]">&times;</button>
                </div>
                
                <div class="flex justify-around mb-8">
                    <div class="text-center">
                        <div id="playedCount" class="text-3xl font-bold">0</div>
                        <div class="text-sm">ุงูุนุจ</div>
                    </div>
                    <div class="text-center">
                        <div id="winPercent" class="text-3xl font-bold">0%</div>
                        <div class="text-sm">ููุฒ</div>
                    </div>
                    <div class="text-center">
                        <div id="currentStreak" class="text-3xl font-bold">0</div>
                        <div class="text-sm">ุชุชุงุจุน</div>
                    </div>
                    <div class="text-center">
                        <div id="maxStreak" class="text-3xl font-bold">0</div>
                        <div class="text-sm">ุฃุนูู ุชุชุงุจุน</div>
                    </div>
                </div>
                
                <h3 class="font-bold mb-3">ุชูุฒูุน ุงูุชุฎูููุงุช</h3>
                <div id="guessDistribution" class="space-y-1 mb-6"></div>
                
                <div class="space-y-3">
                    <button id="shareBtn" class="w-full bg-[var(--correct-color)] text-white py-3 rounded font-bold hover:opacity-90">
                        <i class="fas fa-share-alt ml-2"></i> ูุดุงุฑูุฉ ุงููุชูุฌุฉ
                    </button>
                    <button id="newGameBtn" class="w-full border border-[var(--border-color)] py-3 rounded font-bold hover:bg-[var(--default-color)]">
                        ูุนุจุฉ ุฌุฏูุฏุฉ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="settingsModal" class="fixed inset-0 modal-overlay z-50 flex items-center justify-center hidden p-4">
        <div class="bg-[var(--bg-color)] border border-[var(--border-color)] rounded-lg max-w-md w-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">ุงูุฅุนุฏุงุฏุงุช</h2>
                    <button id="closeSettings" class="text-2xl hover:text-[var(--absent-color)]">&times;</button>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <span>ุงููุถุน ุงููููู</span>
                        <label class="switch">
                            <input type="checkbox" id="darkModeToggle">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <span>ุตูุช ุงูุชุฃุซูุฑุงุช</span>
                        <label class="switch">
                            <input type="checkbox" id="soundToggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                    
                    <div class="pt-4 border-t border-[var(--border-color)]">
                        <h3 class="font-bold mb-3">ุงุฎุชุฑ ุตุนูุจุฉ ุงููููุฉ:</h3>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="radio" name="difficulty" value="easy" checked class="ml-2">
                                <span>ุณููุฉ (ูููุงุช ุดุงุฆุนุฉ)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="difficulty" value="medium" class="ml-2">
                                <span>ูุชูุณุทุฉ</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="difficulty" value="hard" class="ml-2">
                                <span>ุตุนุจุฉ (ูููุงุช ูุงุฏุฑุฉ)</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 text-center">
                    <button id="resetStatsBtn" class="text-red-500 hover:text-red-700">
                        <i class="fas fa-trash-alt ml-2"></i> ุฅุนุงุฏุฉ ุชุนููู ุงูุฅุญุตุงุฆูุงุช
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ูุงุฆูุฉ ุงููููุงุช ุงูุนุฑุจูุฉ (ูุฃุฎูุฐุฉ ูู arwordle)
        const WORD_LIST = [
            "ูุชุงุจ", "ููู", "ุจุงุจ", "ุฏุงุฑ", "ููุฑ", "ุฌุจู", "ุดูุณ", "ููุฑ", "ููู", "ููุงุฑ",
            "ูุฑุฏ", "ุซูุจ", "ูุฌู", "ูุฏูู", "ุฑุฃุณ", "ุนูู", "ุฃุฐู", "ูู", "ุฃูู", "ูุฏู",
            "ุญุจ", "ุฎูู", "ุฃูู", "ุญูู", "ุนูู", "ุนูู", "ูุฑู", "ุธูู", "ุนุฏู", "ุญุฑุจ",
            "ุณูู", "ุตุญุฉ", "ูุฑุถ", "ุบูู", "ููุฑ", "ุฌูุน", "ุนุทุด", "ููู", "ููุธ", "ุณูุฑ",
            "ุญุถุฑ", "ุจุฑุฏ", "ุญุฑ", "ุฌุงู", "ุฑุทุจ", "ูุฏูู", "ุฌุฏูุฏ", "ูุจูุฑ", "ุตุบูุฑ", "ุทููู",
            "ูุตูุฑ", "ุนุฑูุถ", "ุถูู", "ุซููู", "ุฎููู", "ุณุฑูุน", "ุจุทู", "ููู", "ุถุนูู", "ูุงุนู",
            "ุฎุดู", "ุญูู", "ูุฑ", "ุญุงูุถ", "ูุงูุญ", "ุณุงุฎู", "ุจุงุฑุฏ", "ูุธูู", "ูุฐุฑ", "ูุถู",
            "ูุนุชู", "ุตุงูู", "ูุฏุฑ", "ูุณุชููู", "ูุนูุฌ", "ูุณุชุฏูุฑ", "ูุฑุจุน", "ูุซูุซ", "ูุฎุฑูุทู",
            "ูุณุทุญ", "ูุญุฏุจ", "ููุนุฑ", "ูููุตู", "ูุชุตู", "ูุชุญุฑู", "ุณุงูู", "ุตุงูุช", "ุตุงุฎุจ", "ูุงุฏุฆ",
            "ุนุงุตู", "ุณุงูู", "ูุดุฑู", "ูุธูู", "ูุชููุฌ", "ุฎุงูุช", "ูุงุถุญ", "ุบุงูุถ", "ูุจุงุดุฑ", "ุบูุฑ ูุจุงุดุฑ",
            "ุจุณูุท", "ูุนูุฏ", "ุณูู", "ุตุนุจ", "ูููู", "ูุณุชุญูู", "ุถุฑูุฑู", "ุบูุฑ ุถุฑูุฑู", "ููู", "ุชุงูู",
            "ุฌุฏู", "ูุฒุงุญ", "ุญูููู", "ูููู", "ุทุจูุนู", "ุตูุงุนู", "ุญู", "ููุช", "ูุจุงุช", "ุฌูุงุฏ",
            "ุฅูุณุงู", "ุญููุงู", "ุทูุฑ", "ุณูู", "ุญุดุฑุฉ", "ุดุฌุฑ", "ุนุดุจ", "ุฒูุฑ", "ุซูุฑ", "ุจุฐุฑ",
            "ุฌุฐุฑ", "ุณุงู", "ูุฑู", "ุดูู", "ูุทู", "ุฒุฑุน", "ุญุตุงุฏ", "ุฑู", "ุณูุงุฏ", "ุชุฑุจุฉ",
            "ูุงุก", "ููุงุก", "ุชุฑุงุจ", "ูุงุฑ", "ุถูุก", "ุธู", "ุตูุช", "ุฑุงุฆุญุฉ", "ุทุนู", "ููุณ",
            "ุจุตุฑ", "ุณูุน", "ุดู", "ุฐูู", "ููุณ", "ููุฑ", "ุดุนูุฑ", "ุฅุญุณุงุณ", "ุนุงุทูุฉ", "ููุทู",
            "ุฐุงูุฑุฉ", "ุฎูุงู", "ุฅุฑุงุฏุฉ", "ูุฑุงุฑ", "ุฎุทุฉ", "ูุฏู", "ูุณููุฉ", "ูุชูุฌุฉ", "ุณุจุจ", "ูุณุจุจ",
            "ุญู", "ูุดููุฉ", "ุณุคุงู", "ุฌูุงุจ", "ุดุฑุญ", "ุชูุฎูุต", "ุชุญููู", "ุชุฑููุจ", "ููุงุฑูุฉ", "ุชูููุฒ",
            "ุชุนุฑูู", "ุชุณููุฉ", "ุนุฏ", "ููุงุณ", "ูุฒู", "ุญุณุงุจ", "ููุฏุณุฉ", "ุฌุจุฑ", "ุชูุงุถู", "ุชูุงูู",
            "ุฅุญุตุงุก", "ุงุญุชูุงู", "ููุทู", "ููุณูุฉ", "ุนูู", "ุฏูู", "ูู", "ุฃุฏุจ", "ุดุนุฑ", "ูุซุฑ",
            "ูุตุฉ", "ุฑูุงูุฉ", "ูุณุฑุญูุฉ", "ููุงู", "ุจุญุซ", "ุฏุฑุงุณุฉ", "ูุชุงุจ", "ูุฌูุฉ", "ุตุญููุฉ", "ูููุน",
            "ุจุฑูุงูุฌ", "ุชุทุจูู", "ูุนุจุฉ", "ุฑูุงุถุฉ", "ููุณููู", "ุฑุณู", "ุชุตููุฑ", "ูุญุช", "ุนูุงุฑุฉ", "ุชุตููู",
            "ุทุจุฎ", "ุฎูุงุทุฉ", "ูุฌุงุฑุฉ", "ุญุฏุงุฏุฉ", "ุจูุงุก", "ุฒุฑุงุนุฉ", "ุตูุงุนุฉ", "ุชุฌุงุฑุฉ", "ุงูุชุตุงุฏ", "ูุงู",
            "ุณูู", "ุดุฑูุฉ", "ูุตูุน", "ูุฒุฑุนุฉ", "ููุชุจ", "ูุฏุฑุณุฉ", "ุฌุงูุนุฉ", "ูุณุชุดูู", "ููุฏู", "ูุทุนู",
            "ุญุฏููุฉ", "ููุนุจ", "ูุณุงุฑ", "ูููุงุก", "ูุทุงุฑ", "ูุญุทุฉ", "ุทุฑูู", "ุดุงุฑุน", "ุณุงุญุฉ", "ุฌุณุฑ",
            "ููู", "ุณุฏ", "ููุงุฉ", "ุจุฆุฑ", "ุนููู", "ููุงุจูุน", "ุฃูุทุงุฑ", "ุซููุฌ", "ุจุฑุฏ", "ุตููุน",
            "ุถุจุงุจ", "ูุฏู", "ุฑุทูุจุฉ", "ุฌูุงู", "ูุญุท", "ุฎุตุจ", "ููุฑุฉ", "ูุฏุฑุฉ", "ูุซุงูุฉ", "ูุฏุฑุฉ",
            "ุชูุฒูุน", "ุชุฑููุฒ", "ุงูุชุดุงุฑ", "ุชูุณุน", "ุงูููุงุด", "ุชูุฏู", "ุชุฑุงุฌุน", "ุตุนูุฏ", "ูุจูุท", "ุฒูุงุฏุฉ",
            "ููุตุงู", "ุชูุงุซุฑ", "ุชูุงูุต", "ุงุชุญุงุฏ", "ุงููุตุงู", "ุงุฌุชูุงุน", "ุชูุฑู", "ููุงุก", "ูุฑุงู", "ุจุฏุงูุฉ",
            "ููุงูุฉ", "ููุชุตู", "ุฌุงูุจ", "ูุณุท", "ุทุฑู", "ุฒุงููุฉ", "ุณุทุญ", "ุนูู", "ุงุฑุชูุงุน", "ุงูุฎูุงุถ",
            "ูุฑุจ", "ุจุนุฏ", "ุงุชุตุงู", "ุงููุตุงู", "ุชุดุงุจู", "ุงุฎุชูุงู", "ุงุชูุงู", "ุงุฎุชูุงู", "ุชุนุงูู", "ุชูุงูุณ",
            "ุตุฑุงุน", "ุณูุงู", "ุญุฑุจ", "ุชูุงูุถ", "ุงุชูุงููุฉ", "ูุนุงูุฏุฉ", "ูุงููู", "ูุธุงู", "ูุงุฆุญุฉ", "ุชุนูููุงุช",
            "ุชูุฌููุงุช", "ุฃูุงูุฑ", "ููุงูู", "ุญููู", "ูุงุฌุจุงุช", "ูุณุคูููุงุช", "ุตูุงุญูุงุช", "ุญุฏูุฏ", "ูููุฏ", "ุญุฑูุงุช",
            "ุถูุงูุงุช", "ุชุฃููู", "ุญูุงูุฉ", "ุฏูุงุน", "ูุฌูู", "ุงูุชุตุงุฑ", "ูุฒููุฉ", "ููุฒ", "ุฎุณุงุฑุฉ", "ูุฌุงุญ",
            "ูุดู", "ุชูุฏู", "ุชุฃุฎุฑ", "ุชุญุณู", "ุชุฏููุฑ", "ุงุณุชูุฑุงุฑ", "ุชููุจ", "ุซุจุงุช", "ุชุบูุฑ", "ุชุญูู",
            "ุชุทูุฑ", "ุชุฑุงุฌุน", "ุชุฌุฏุฏ", "ุชูุงุฏู", "ุญุฏุงุซุฉ", "ุชุฑุงุซ", "ุฃุตุงูุฉ", "ูุนุงุตุฑุฉ", "ุชูููุฏ", "ุงุจุชูุงุฑ",
            "ุฅุจุฏุงุน", "ุชูููุฏ", "ูุณุฎ", "ุชุนุฏูู", "ุชุญุณูู", "ุชุบููุฑ", "ุฅุตูุงุญ", "ุชุฏููุฑ", "ุจูุงุก", "ูุฏู",
            "ุชุฑููุจ", "ูู", "ุฌูุน", "ุชูุฑูู", "ุฑุจุท", "ูุตู", "ุถู", "ูุฒุน", "ุฅุฏุฎุงู", "ุฅุฎุฑุงุฌ",
            "ุฑูุน", "ุฎูุถ", "ุณุญุจ", "ุฏูุน", "ูู", "ูู", "ุถุบุท", "ุชูุฏูุฏ", "ูู", "ุทูู",
            "ูุดุฑ", "ููู", "ูุต", "ูุตู", "ุญูุฑ", "ููุด", "ุฑุณู", "ุชูููู", "ูุชุงุจุฉ", "ูุญู"
        ];

        // ูุงููุณ ููุณุน ููุชุญูู
        const DICTIONARY = [...new Set(WORD_LIST)].concat([
            "ุฃุจุฌุฏ", "ููุฒ", "ุญุทู", "ูููู", "ุณุนูุต", "ูุฑุดุช", "ุซุฎุฐ", "ุถุธุบ", "ุฃุจุฑูู", "ุฃูุชูุจุฑ",
            "ููููุจุฑ", "ุฏูุณูุจุฑ", "ููุงูุฑ", "ูุจุฑุงูุฑ", "ูุงุฑุณ", "ุฃุจุฑูู", "ูุงูู", "ููููู", "ููููู",
            "ุฃุบุณุทุณ", "ุณุจุชูุจุฑ", "ุงูุฃุญุฏ", "ุงูุงุซููู", "ุงูุซูุงุซุงุก", "ุงูุฃุฑุจุนุงุก", "ุงูุฎููุณ", "ุงูุฌูุนุฉ",
            "ุงูุณุจุช", "ุตุจุงุญ", "ูุณุงุก", "ููู", "ููุงุฑ", "ูุฌุฑ", "ุธูุฑ", "ุนุตุฑ", "ูุบุฑุจ", "ุนุดุงุก",
            "ุฃูู", "ุซุงู", "ุซุงูุซ", "ุฑุงุจุน", "ุฎุงูุณ", "ุณุงุฏุณ", "ุณุงุจุน", "ุซุงูู", "ุชุงุณุน", "ุนุงุดุฑ",
            "ุฃุญูุฑ", "ุฃุฎุถุฑ", "ุฃุฒุฑู", "ุฃุตูุฑ", "ุฃุจูุถ", "ุฃุณูุฏ", "ุฑูุงุฏู", "ุจููุณุฌู", "ุจุฑุชูุงูู", "ูุฑุฏู",
            "ุจูู", "ุฐูุจู", "ูุถู", "ูุญุงุณู", "ุจุฑููุฒู", "ูุงุชุญ", "ุบุงูู", "ุฒุงูู", "ุจุงูุช", "ูุงูุน",
            "ูุนุชู", "ุดุงุญุจ", "ูุงุชู", "ูุงุตุน", "ูุงุชู", "ุฌููู", "ูุจูุญ", "ูุณูู", "ุฏููู", "ุฃููู",
            "ุฑุซ", "ูุงุฎุฑ", "ุจุณูุท", "ูุชูุงุถุน", "ูุชุฑู", "ูููุฑ", "ุบู", "ูุนุณุฑ", "ููุณุฑ", "ูุนุฏู",
            "ูุญุชุงุฌ", "ุบูู", "ุซุฑู", "ูููุฑ", "ูุนูุฒ", "ููุณูุฑ", "ูุนุณุฑ", "ูุชุฑู", "ูุชูุณุท", "ุฏูู",
            "ููู", "ุชุญุช", "ูููู", "ูุณุงุฑ", "ุฃูุงู", "ุฎูู", "ุฏุงุฎู", "ุฎุงุฑุฌ", "ูุฑูุจ", "ุจุนูุฏ",
            "ุนุงู", "ุณุงูู", "ูุฑุชูุน", "ููุฎูุถ", "ุณุทุญ", "ูุงุน", "ุฐุฑูุฉ", "ุญุถูุถ", "ูุณุท", "ุฌุงูุจ",
            "ุทุฑู", "ููุงูุฉ", "ุจุฏุงูุฉ", "ูุณุท", "ููุชุตู", "ุฑุฃุณ", "ุฐูู", "ุตุฏุฑ", "ุธูุฑ", "ุจุทู",
            "ุฌุงูุจ", "ูุชู", "ุฐุฑุงุน", "ุณุงุนุฏ", "ูู", "ุฅุตุจุน", "ุธูุฑ", "ุฑุงุญุฉ", "ูุนุตู", "ูุฑูู",
            "ูุชู", "ุตุฏุฑ", "ููุจ", "ุฑุฆุฉ", "ูุจุฏ", "ูุนุฏุฉ", "ุฃูุนุงุก", "ููู", "ูุซุงูุฉ", "ุฏูุงุบ",
            "ุนุตุจ", "ุนุธู", "ุนุถู", "ุฌูุฏ", "ุดุนุฑ", "ุธูุฑ", "ุฏู", "ุนุฑู", "ุฏููุน", "ูุนุงุจ"
        ]);

        const gameState = {
            targetWord: "",
            currentRow: 0,
            currentGuess: "",
            gameOver: false,
            gameWon: false,
            stats: {
                played: 0,
                wins: 0,
                currentStreak: 0,
                maxStreak: 0,
                guessDistribution: [0, 0, 0, 0, 0, 0]
            }
        };

        // ุงูุชููุฆุฉ
        function init() {
            loadStats();
            loadTheme();
            createGrid();
            createKeyboard();
            startNewGame();
            setupEventListeners();
        }

        function loadStats() {
            const saved = localStorage.getItem('arwordle_stats');
            if (saved) {
                gameState.stats = JSON.parse(saved);
            }
        }

        function saveStats() {
            localStorage.setItem('arwordle_stats', JSON.stringify(gameState.stats));
        }

        function loadTheme() {
            const isDark = localStorage.getItem('arwordle_dark') === 'true';
            if (isDark) {
                document.body.classList.add('dark-mode');
                document.querySelector('#themeToggle i').className = 'fas fa-sun text-xl';
            }
        }

        function createGrid() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            
            for (let row = 0; row < 6; row++) {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'flex gap-2 justify-center';
                rowDiv.id = `row-${row}`;
                
                for (let col = 0; col < 5; col++) {
                    const tile = document.createElement('div');
                    tile.className = 'tile';
                    tile.id = `tile-${row}-${col}`;
                    rowDiv.appendChild(tile);
                }
                
                grid.appendChild(rowDiv);
            }
        }

        function createKeyboard() {
            const keyboard = document.getElementById('keyboard');
            const layout = [
                "ุถุตุซููุบุนูุฎุญุฌุฏ",
                "ุดุณูุจูุงุชูููุทุฆ",
                "ุคุฑูุงูุฉูุฒุธุฐ"
            ];
            
            keyboard.innerHTML = '';
            
            layout.forEach((row, index) => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'flex justify-center gap-1';
                
                if (index === 2) {
                    const enterKey = createKey('Enter', 'Enter', 'wide');
                    rowDiv.appendChild(enterKey);
                }
                
                for (const char of row) {
                    const key = createKey(char, char);
                    rowDiv.appendChild(key);
                }
                
                if (index === 2) {
                    const backspaceKey = createKey('โซ', 'Backspace', 'wide');
                    rowDiv.appendChild(backspaceKey);
                }
                
                keyboard.appendChild(rowDiv);
            });
        }

        function createKey(text, value, extraClass = '') {
            const key = document.createElement('button');
            key.className = `key ${extraClass}`;
            key.textContent = text;
            key.dataset.key = value;
            
            key.addEventListener('click', () => {
                handleInput(value);
            });
            
            return key;
        }

        function startNewGame() {
            // ุงุฎุชูุงุฑ ูููุฉ ุนุดูุงุฆูุฉ
            const difficulty = document.querySelector('input[name="difficulty"]:checked').value;
            let filteredWords = WORD_LIST;
            
            if (difficulty === 'easy') {
                filteredWords = WORD_LIST.filter(word => 
                    word.length === 5 && 
                    !word.includes('ุบ') && 
                    !word.includes('ุธ') && 
                    !word.includes('ุถ')
                );
            } else if (difficulty === 'hard') {
                filteredWords = WORD_LIST.filter(word => 
                    word.length === 5 && 
                    (word.includes('ุบ') || word.includes('ุธ') || word.includes('ุถ'))
                );
            }
            
            gameState.targetWord = filteredWords[Math.floor(Math.random() * filteredWords.length)];
            gameState.currentRow = 0;
            gameState.currentGuess = '';
            gameState.gameOver = false;
            gameState.gameWon = false;
            
            // ุฅุนุงุฏุฉ ุชุนููู ุงูุดุจูุฉ
            document.querySelectorAll('.tile').forEach(tile => {
                tile.className = 'tile';
                tile.textContent = '';
            });
            
            // ุฅุนุงุฏุฉ ุชุนููู ููุญุฉ ุงูููุงุชูุญ
            document.querySelectorAll('.key').forEach(key => {
                key.className = key.className.replace(/(correct|present|absent)/g, '').trim();
            });
            
            // ุฅุฎูุงุก ุงูุฑุณุงูุฉ
            document.getElementById('message').textContent = '';
            
            console.log('ุงููููุฉ ุงููุณุชูุฏูุฉ:', gameState.targetWord); // ูุฃุบุฑุงุถ ุงูุชุตุญูุญ
        }

        function handleInput(key) {
            if (gameState.gameOver) return;
            
            if (key === 'Enter') {
                submitGuess();
            } else if (key === 'Backspace') {
                if (gameState.currentGuess.length > 0) {
                    gameState.currentGuess = gameState.currentGuess.slice(0, -1);
                    updateGrid();
                }
            } else if (gameState.currentGuess.length < 5) {
                // ูุจูู ุงูุญุฑูู ุงูุนุฑุจูุฉ ููุท
                if (/^[\u0600-\u06FF]$/.test(key)) {
                    gameState.currentGuess += key;
                    updateGrid();
                    
                    // ุชุฃุซูุฑ ุธููุฑ ุงูุญุฑู
                    const tile = document.getElementById(`tile-${gameState.currentRow}-${gameState.currentGuess.length-1}`);
                    tile.classList.add('filled');
                    setTimeout(() => tile.classList.remove('filled'), 100);
                }
            }
        }

        function updateGrid() {
            for (let i = 0; i < 5; i++) {
                const tile = document.getElementById(`tile-${gameState.currentRow}-${i}`);
                tile.textContent = gameState.currentGuess[i] || '';
            }
        }

        function submitGuess() {
            if (gameState.currentGuess.length !== 5) {
                showMessage('ุงููููุฉ ูุฌุจ ุฃู ุชููู 5 ุฃุญุฑู');
                shakeRow();
                return;
            }
            
            if (!isValidWord(gameState.currentGuess)) {
                showMessage('ุงููููุฉ ุบูุฑ ููุฌูุฏุฉ ูู ุงููุงููุณ');
                shakeRow();
                return;
            }
            
            evaluateGuess();
        }

        function isValidWord(word) {
            const normalized = normalizeWord(word);
            return DICTIONARY.some(w => normalizeWord(w) === normalized);
        }

        function normalizeWord(word) {
            return word
                .replace(/[ุฃุฅุข]/g, 'ุง')
                .replace(/ุฉ/g, 'ู')
                .replace(/[ูุฆ]/g, 'ู')
                .replace(/ุค/g, 'ู')
                .replace(/ุบ/g, 'ู') // ุชูุญูุฏ ุจุนุถ ุงูุญุฑูู ุงููุชุดุงุจูุฉ
                .replace(/ุธ/g, 'ุถ')
                .replace(/ุฐ/g, 'ุฏ')
                .replace(/ุซ/g, 'ุช')
                .replace(/ุฉ/g, 'ุช')
                .toLowerCase();
        }

        function evaluateGuess() {
            const guess = gameState.currentGuess;
            const target = gameState.targetWord;
            const normalizedGuess = normalizeWord(guess);
            const normalizedTarget = normalizeWord(target);
            
            const result = Array(5).fill('absent');
            const targetLetters = {};
            
            // ุนุฏ ุชูุฑุงุฑุงุช ุงูุญุฑูู ูู ุงููููุฉ ุงููุณุชูุฏูุฉ
            for (const letter of normalizedTarget) {
                targetLetters[letter] = (targetLetters[letter] || 0) + 1;
            }
            
            // ุฃููุงู: ุชุญุฏูุฏ ุงูุญุฑูู ุงูุตุญูุญุฉ ูู ุงูููุงู ุงูุตุญูุญ
            for (let i = 0; i < 5; i++) {
                if (normalizedGuess[i] === normalizedTarget[i]) {
                    result[i] = 'correct';
                    targetLetters[normalizedGuess[i]]--;
                }
            }
            
            // ุซุงููุงู: ุชุญุฏูุฏ ุงูุญุฑูู ุงูููุฌูุฏุฉ ูููู ูู ููุงู ุฎุงุทุฆ
            for (let i = 0; i < 5; i++) {
                if (result[i] !== 'correct' && targetLetters[normalizedGuess[i]] > 0) {
                    result[i] = 'present';
                    targetLetters[normalizedGuess[i]]--;
                }
            }
            
            // ุนุฑุถ ุงููุชูุฌุฉ ูุน ุชุฃุซูุฑ ุงูููุจ
            for (let i = 0; i < 5; i++) {
                const tile = document.getElementById(`tile-${gameState.currentRow}-${i}`);
                const delay = i * 300;
                
                setTimeout(() => {
                    tile.classList.add('flip');
                    setTimeout(() => {
                        tile.classList.add(result[i]);
                        updateKeyboard(guess[i], result[i]);
                    }, 300);
                }, delay);
            }
            
            // ุงูุชุญูู ุฅุฐุง ูุงุฒ
            const won = normalizedGuess === normalizedTarget;
            
            setTimeout(() => {
                if (won) {
                    gameState.gameWon = true;
                    gameState.gameOver = true;
                    handleWin();
                } else if (gameState.currentRow === 5) {
                    gameState.gameOver = true;
                    handleLoss();
                } else {
                    gameState.currentRow++;
                    gameState.currentGuess = '';
                }
            }, 1800);
        }

        function updateKeyboard(letter, status) {
            const key = document.querySelector(`.key[data-key="${letter}"]`);
            if (!key) return;
            
            if (status === 'correct') {
                key.classList.add('correct');
                key.classList.remove('present', 'absent');
            } else if (status === 'present' && !key.classList.contains('correct')) {
                key.classList.add('present');
                key.classList.remove('absent');
            } else if (status === 'absent' && !key.classList.contains('correct') && !key.classList.contains('present')) {
                key.classList.add('absent');
            }
        }

        function handleWin() {
            showMessage('๐ ุฃุญุณูุช! ููุฏ ูุฒุช!');
            gameState.stats.played++;
            gameState.stats.wins++;
            gameState.stats.currentStreak++;
            gameState.stats.maxStreak = Math.max(gameState.stats.maxStreak, gameState.stats.currentStreak);
            gameState.stats.guessDistribution[gameState.currentRow]++;
            
            saveStats();
            updateStatsDisplay();
            
            // ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ุจุนุฏ ููุฒ
            setTimeout(() => {
                showStats();
            }, 1500);
        }

        function handleLoss() {
            showMessage(`๐ ุงููููุฉ ูุงูุช: ${gameState.targetWord}`);
            gameState.stats.played++;
            gameState.stats.currentStreak = 0;
            
            saveStats();
            updateStatsDisplay();
            
            // ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ุจุนุฏ ุฎุณุงุฑุฉ
            setTimeout(() => {
                showStats();
            }, 1500);
        }

        function showMessage(text) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.classList.add('bounce');
            setTimeout(() => messageEl.classList.remove('bounce'), 500);
        }

        function shakeRow() {
            const row = document.getElementById(`row-${gameState.currentRow}`);
            if (row) {
                row.classList.add('shake');
                setTimeout(() => row.classList.remove('shake'), 500);
            }
        }

        function showStats() {
            updateStatsDisplay();
            document.getElementById('statsModal').classList.remove('hidden');
        }

        function updateStatsDisplay() {
            document.getElementById('playedCount').textContent = gameState.stats.played;
            document.getElementById('winPercent').textContent = gameState.stats.played > 0 
                ? Math.round((gameState.stats.wins / gameState.stats.played) * 100) + '%'
                : '0%';
            document.getElementById('currentStreak').textContent = gameState.stats.currentStreak;
            document.getElementById('maxStreak').textContent = gameState.stats.maxStreak;
            
            // ุชุญุฏูุซ ุชูุฒูุน ุงูุชุฎูููุงุช
            const distContainer = document.getElementById('guessDistribution');
            distContainer.innerHTML = '';
            
            const maxDist = Math.max(...gameState.stats.guessDistribution);
            
            gameState.stats.guessDistribution.forEach((count, index) => {
                const bar = document.createElement('div');
                bar.className = 'stats-bar';
                bar.style.width = maxDist > 0 ? `${(count / maxDist) * 100}%` : '0%';
                bar.textContent = `${index + 1}: ${count}`;
                distContainer.appendChild(bar);
            });
        }

        function shareResult() {
            let shareText = `ูููุฉ ๐งฉ\n`;
            shareText += `ุงููุชูุฌุฉ: ${gameState.gameWon ? gameState.currentRow + 1 : 'X'}/6\n`;
            
            // ุฅูุดุงุก ุฑุณู ุชุนุจูุฑู ุนู ุงููุชูุฌุฉ
            for (let row = 0; row <= gameState.currentRow; row++) {
                for (let col = 0; col < 5; col++) {
                    const tile = document.getElementById(`tile-${row}-${col}`);
                    if (tile.classList.contains('correct')) {
                        shareText += '๐ฉ';
                    } else if (tile.classList.contains('present')) {
                        shareText += '๐จ';
                    } else if (tile.classList.contains('absent')) {
                        shareText += 'โฌ';
                    }
                }
                shareText += '\n';
            }
            
            shareText += '\n#ูููุฉ #ูุนุจุฉ_ูููุฉ';
            
            navigator.clipboard.writeText(shareText)
                .then(() => {
                    showMessage('ุชู ูุณุฎ ุงููุชูุฌุฉ ุฅูู ุงูุญุงูุธุฉ!');
                })
                .catch(() => {
                    showMessage('ุญุฏุซ ุฎุทุฃ ูู ุงููุดุงุฑูุฉ');
                });
        }

        function setupEventListeners() {
            // ูุนุงูุฌุฉ ุฅุฏุฎุงู ููุญุฉ ุงูููุงุชูุญ
            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey || e.metaKey || e.altKey) return;
                
                if (e.key === 'Enter') {
                    handleInput('Enter');
                } else if (e.key === 'Backspace') {
                    handleInput('Backspace');
                } else if (/^[\u0600-\u06FF]$/.test(e.key)) {
                    handleInput(e.key);
                }
            });
            
            // ุฃุฒุฑุงุฑ ุงูุนูุงููู
            document.getElementById('helpBtn').addEventListener('click', () => {
                document.getElementById('helpModal').classList.remove('hidden');
            });
            
            document.getElementById('statsBtn').addEventListener('click', showStats);
            
            document.getElementById('settingsBtn').addEventListener('click', () => {
                document.getElementById('settingsModal').classList.remove('hidden');
            });
            
            document.getElementById('themeToggle').addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                const icon = document.querySelector('#themeToggle i');
                if (document.body.classList.contains('dark-mode')) {
                    icon.className = 'fas fa-sun text-xl';
                    localStorage.setItem('arwordle_dark', 'true');
                } else {
                    icon.className = 'fas fa-moon text-xl';
                    localStorage.setItem('arwordle_dark', 'false');
                }
            });
            
            // ุฅุบูุงู ุงูููุงูุฐ ุงูููุจุซูุฉ
            document.getElementById('closeHelp').addEventListener('click', () => {
                document.getElementById('helpModal').classList.add('hidden');
            });
            
            document.getElementById('closeStats').addEventListener('click', () => {
                document.getElementById('statsModal').classList.add('hidden');
            });
            
            document.getElementById('closeSettings').addEventListener('click', () => {
                document.getElementById('settingsModal').classList.add('hidden');
            });
            
            // ุฃุฒุฑุงุฑ ุงูููุงูุฐ ุงูููุจุซูุฉ
            document.getElementById('startGameBtn').addEventListener('click', () => {
                document.getElementById('helpModal').classList.add('hidden');
                startNewGame();
            });
            
            document.getElementById('newGameBtn').addEventListener('click', () => {
                document.getElementById('statsModal').classList.add('hidden');
                startNewGame();
            });
            
            document.getElementById('shareBtn').addEventListener('click', shareResult);
            
            document.getElementById('resetStatsBtn').addEventListener('click', () => {
                if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุชุนููู ุฌููุน ุงูุฅุญุตุงุฆูุงุชุ')) {
                    gameState.stats = {
                        played: 0,
                        wins: 0,
                        currentStreak: 0,
                        maxStreak: 0,
                        guessDistribution: [0, 0, 0, 0, 0, 0]
                    };
                    saveStats();
                    updateStatsDisplay();
                    showMessage('ุชู ุฅุนุงุฏุฉ ุชุนููู ุงูุฅุญุตุงุฆูุงุช');
                }
            });
            
            // ุชุบููุฑ ุงูุตุนูุจุฉ
            document.querySelectorAll('input[name="difficulty"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    startNewGame();
                });
            });
            
            // ุฅุบูุงู ุงูููุงูุฐ ุงูููุจุซูุฉ ุจุงูููุฑ ุฎุงุฑุฌูุง
            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.add('hidden');
                    }
                });
            });
        }

        // ุจุฏุก ุงููุนุจุฉ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        window.addEventListener('load', init);
    </script>
</body>
</html>
