<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÙƒÙ„Ù…Ø©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap');
        
        * {
            font-family: 'Tajawal', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --correct-color: #6ca965;
            --present-color: #c8b653;
            --absent-color: #787c7e;
            --default-color: #d3d6da;
            --bg-color: #ffffff;
            --text-color: #000000;
            --border-color: #d3d6da;
            --key-bg: #d3d6da;
            --key-text: #000000;
            --tile-size: 4rem;
            --key-height: 3.2rem;
        }

        .dark-mode {
            --correct-color: #538d4e;
            --present-color: #b59f3b;
            --absent-color: #3a3a3c;
            --default-color: #818384;
            --bg-color: #121213;
            --text-color: #ffffff;
            --border-color: #3a3a3c;
            --key-bg: #818384;
            --key-text: #ffffff;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
            min-height: 100vh;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        .tile {
            width: var(--tile-size);
            height: var(--tile-size);
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: calc(var(--tile-size) * 0.6);
            font-weight: 800;
            user-select: none;
            transition: all 0.3s ease;
            border-radius: 4px;
        }

        @media (max-width: 1024px) {
            :root {
                --tile-size: 3.5rem;
                --key-height: 2.8rem;
            }
        }

        @media (max-width: 768px) {
            :root {
                --tile-size: 3.2rem;
                --key-height: 2.6rem;
            }
        }

        @media (max-width: 640px) {
            :root {
                --tile-size: 2.8rem;
                --key-height: 2.4rem;
            }
        }

        @media (max-width: 480px) {
            :root {
                --tile-size: 2.5rem;
                --key-height: 2.2rem;
            }
        }

        @media (max-width: 380px) {
            :root {
                --tile-size: 2.3rem;
                --key-height: 2rem;
            }
        }

        @media (max-width: 320px) {
            :root {
                --tile-size: 2rem;
                --key-height: 1.8rem;
            }
        }

        @media (min-width: 1025px) and (min-height: 700px) {
            :root {
                --tile-size: 4.5rem;
                --key-height: 3.5rem;
            }
        }

        .tile.filled {
            border-color: #878a8c;
            animation: pop 0.1s ease;
        }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .tile.correct {
            background-color: var(--correct-color);
            border-color: var(--correct-color);
            color: white;
        }

        .tile.present {
            background-color: var(--present-color);
            border-color: var(--present-color);
            color: white;
        }

        .tile.absent {
            background-color: var(--absent-color);
            border-color: var(--absent-color);
            color: white;
        }

        .flip {
            animation: flip 0.6s ease;
        }

        @keyframes flip {
            0% { transform: rotateX(0); }
            50% { transform: rotateX(90deg); }
            100% { transform: rotateX(0); }
        }

        .key {
            height: var(--key-height);
            min-width: calc(var(--key-height) * 0.8);
            background-color: var(--key-bg);
            color: var(--key-text);
            border: none;
            border-radius: 6px;
            font-weight: 700;
            font-size: calc(var(--key-height) * 0.35);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
            touch-action: manipulation;
            padding: 0 6px;
            margin: 2px;
            flex: 1;
        }

        .key:hover, .key:active {
            opacity: 0.9;
            transform: scale(0.98);
        }

        .key.wide {
            min-width: calc(var(--key-height) * 1.6);
            font-size: calc(var(--key-height) * 0.3);
            font-weight: 600;
            flex: 2;
        }

        .key.correct {
            background-color: var(--correct-color);
            color: white;
        }

        .key.present {
            background-color: var(--present-color);
            color: white;
        }

        .key.absent {
            background-color: var(--absent-color);
            color: white;
        }

        .shake {
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .bounce {
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
        }

        .stats-bar {
            height: 32px;
            background-color: var(--absent-color);
            color: white;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            margin: 2px 0;
        }

        /* Switch toggle */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: var(--correct-color);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        @media (max-height: 700px) {
            :root {
                --tile-size: 2.5rem;
                --key-height: 2.2rem;
            }
            
            header {
                padding: 0.5rem 1rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .grid-rows-8 {
                gap: 0.25rem;
            }
            
            #keyboard {
                margin-top: 0.5rem;
                padding: 0 0.25rem;
            }
            
            .key-row {
                margin-bottom: 0.25rem;
            }
        }

        @media (max-height: 600px) {
            :root {
                --tile-size: 2.2rem;
                --key-height: 2rem;
            }
            
            #message {
                margin-bottom: 0.5rem;
                height: 1.5rem;
                font-size: 0.9rem;
            }
        }

        .grid-rows-8 {
            gap: 0.5rem;
        }

        @media (max-width: 640px) {
            .grid-rows-8 {
                gap: 0.4rem;
            }
        }

        @media (max-width: 480px) {
            .grid-rows-8 {
                gap: 0.3rem;
            }
        }

        header {
            padding: 1rem;
            min-height: 4rem;
            border-bottom: 1px solid var(--border-color);
        }

        h1 {
            font-size: 2rem;
            font-weight: 800;
            letter-spacing: -0.5px;
        }

        .icon-btn {
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
        }

        .icon-btn:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        .dark-mode .icon-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        main {
            padding: 1rem 0.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: calc(100vh - 4rem);
        }

        #message {
            min-height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            padding: 0.5rem;
        }

        #keyboard {
            margin-top: auto;
            padding: 0.5rem;
            width: 100%;
        }

        .key-row {
            display: flex;
            justify-content: center;
            gap: 0.25rem;
            margin-bottom: 0.5rem;
        }

        .modal-content {
            max-height: 90vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header -->
    <header class="flex items-center justify-between px-4 py-4">
        <div class="flex items-center gap-2">
            <button id="helpBtn" class="icon-btn">
                <i class="fas fa-question-circle text-xl"></i>
            </button>
            <button id="statsBtn" class="icon-btn">
                <i class="fas fa-chart-bar text-xl"></i>
            </button>
        </div>
        
        <h1 class="text-2xl font-bold text-center flex-1 px-2">ÙƒÙ„Ù…Ø©</h1>
        
        <div class="flex items-center gap-2">
            <button id="settingsBtn" class="icon-btn">
                <i class="fas fa-cog text-xl"></i>
            </button>
            <button id="themeToggle" class="icon-btn">
                <i class="fas fa-moon text-xl"></i>
            </button>
        </div>
    </header>

    <!-- Game Grid -->
    <main>
        <div id="message" class="mb-2"></div>
        <div id="grid" class="grid grid-rows-8 gap-2 mb-4 flex justify-center"></div>
        
        <!-- Keyboard -->
        <div id="keyboard" class="w-full max-w-2xl mx-auto"></div>
    </main>

    <!-- Modals -->
    <div id="helpModal" class="fixed inset-0 modal-overlay z-50 flex items-center justify-center hidden p-4">
        <div class="bg-[var(--bg-color)] border border-[var(--border-color)] rounded-xl w-full max-w-md modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">ÙƒÙŠÙÙŠØ© Ø§Ù„Ù„Ø¹Ø¨</h2>
                    <button id="closeHelp" class="text-2xl hover:text-[var(--absent-color)] transition">&times;</button>
                </div>
                
                <p class="mb-4 text-lg">ØªØ®Ù…Ù‘Ù† Ø§Ù„ÙƒÙ„Ù…Ø© ÙÙŠ 8 Ù…Ø­Ø§ÙˆÙ„Ø§Øª</p>
                <p class="mb-6 text-lg">Ø¨Ø¹Ø¯ ÙƒÙ„ ØªØ®Ù…ÙŠÙ†ØŒ ÙŠØªØºÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø¨Ù„Ø§Ø·Ø§Øª Ù„ÙŠØ¹Ø·ÙŠÙƒ ØªÙ„Ù…ÙŠØ­Ø§Øª</p>
                
                <div class="space-y-4 mb-6">
                    <div class="flex items-center gap-3">
                        <div class="tile correct" style="width: 3rem; height: 3rem; font-size: 1.8rem;">Ù†</div>
                        <p class="text-lg">Ø§Ù„Ø­Ø±Ù <strong>Ù†</strong> ÙÙŠ Ù…ÙƒØ§Ù†Ù‡ Ø§Ù„ØµØ­ÙŠØ­</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="tile present" style="width: 3rem; height: 3rem; font-size: 1.8rem;">Ø¹</div>
                        <p class="text-lg">Ø§Ù„Ø­Ø±Ù <strong>Ø¹</strong> Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ÙƒÙ„Ù…Ø© ÙˆÙ„ÙƒÙ† ÙÙŠ Ù…ÙƒØ§Ù† Ø¢Ø®Ø±</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="tile absent" style="width: 3rem; height: 3rem; font-size: 1.8rem;">Ø§</div>
                        <p class="text-lg">Ø§Ù„Ø­Ø±Ù <strong>Ø§</strong> ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ÙƒÙ„Ù…Ø©</p>
                    </div>
                </div>
                
                <p class="mb-6 text-lg"><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠÙ…ÙŠØ² Ø¨ÙŠÙ† Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù…Ø®ØªÙ„ÙØ© (Ø£ØŒ Ø¥ØŒ Ø¢ØŒ Ø§ØŒ Ø©ØŒ Ù‡)</p>
                
                <div class="text-center">
                    <button id="startGameBtn" class="bg-[var(--correct-color)] text-white px-8 py-3 rounded-lg font-bold hover:opacity-90 transition text-lg w-full">
                        Ø¨Ø¯Ø¡ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="statsModal" class="fixed inset-0 modal-overlay z-50 flex items-center justify-center hidden p-4">
        <div class="bg-[var(--bg-color)] border border-[var(--border-color)] rounded-xl w-full max-w-md">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
                    <button id="closeStats" class="text-2xl hover:text-[var(--absent-color)] transition">&times;</button>
                </div>
                
                <div class="flex justify-around mb-8">
                    <div class="text-center">
                        <div id="playedCount" class="text-3xl font-bold">0</div>
                        <div class="text-sm mt-1">Ø§Ù„Ø¹Ø¨</div>
                    </div>
                    <div class="text-center">
                        <div id="winPercent" class="text-3xl font-bold">0%</div>
                        <div class="text-sm mt-1">ÙÙˆØ²</div>
                    </div>
                    <div class="text-center">
                        <div id="currentStreak" class="text-3xl font-bold">0</div>
                        <div class="text-sm mt-1">ØªØªØ§Ø¨Ø¹</div>
                    </div>
                    <div class="text-center">
                        <div id="maxStreak" class="text-3xl font-bold">0</div>
                        <div class="text-sm mt-1">Ø£Ø¹Ù„Ù‰ ØªØªØ§Ø¨Ø¹</div>
                    </div>
                </div>
                
                <h3 class="font-bold mb-3 text-lg">ØªÙˆØ²ÙŠØ¹ Ø§Ù„ØªØ®Ù…ÙŠÙ†Ø§Øª</h3>
                <div id="guessDistribution" class="space-y-1 mb-6"></div>
                
                <div class="space-y-3">
                    <button id="shareBtn" class="w-full bg-[var(--correct-color)] text-white py-3 rounded-lg font-bold hover:opacity-90 transition text-lg">
                        <i class="fas fa-share-alt ml-2"></i> Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªÙŠØ¬Ø©
                    </button>
                    <button id="newGameBtn" class="w-full border-2 border-[var(--border-color)] py-3 rounded-lg font-bold hover:bg-[var(--default-color)] transition text-lg">
                        Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="settingsModal" class="fixed inset-0 modal-overlay z-50 flex items-center justify-center hidden p-4">
        <div class="bg-[var(--bg-color)] border border-[var(--border-color)] rounded-xl w-full max-w-md">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
                    <button id="closeSettings" class="text-2xl hover:text-[var(--absent-color)] transition">&times;</button>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between py-2">
                        <span class="text-lg">Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</span>
                        <label class="switch">
                            <input type="checkbox" id="darkModeToggle">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between py-2">
                        <span class="text-lg">ØµÙˆØª Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª</span>
                        <label class="switch">
                            <input type="checkbox" id="soundToggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                    
                    <div class="pt-4 border-t border-[var(--border-color)]">
                        <h3 class="font-bold mb-3 text-lg">Ø§Ø®ØªØ± ØµØ¹ÙˆØ¨Ø© Ø§Ù„ÙƒÙ„Ù…Ø©:</h3>
                        <div class="space-y-3">
                            <label class="flex items-center py-2">
                                <input type="radio" name="difficulty" value="easy" checked class="ml-3 w-5 h-5">
                                <span class="text-lg">Ø³Ù‡Ù„Ø© (ÙƒÙ„Ù…Ø§Øª Ø´Ø§Ø¦Ø¹Ø©)</span>
                            </label>
                            <label class="flex items-center py-2">
                                <input type="radio" name="difficulty" value="medium" class="ml-3 w-5 h-5">
                                <span class="text-lg">Ù…ØªÙˆØ³Ø·Ø©</span>
                            </label>
                            <label class="flex items-center py-2">
                                <input type="radio" name="difficulty" value="hard" class="ml-3 w-5 h-5">
                                <span class="text-lg">ØµØ¹Ø¨Ø© (ÙƒÙ„Ù…Ø§Øª Ù†Ø§Ø¯Ø±Ø©)</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 text-center">
                    <button id="resetStatsBtn" class="text-red-500 hover:text-red-700 transition text-lg py-2">
                        <i class="fas fa-trash-alt ml-2"></i> Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…Ø­Ø³Ù†Ø©
        const WORD_LIST = [
            "Ù…Ø¯Ø±Ø³Ø©", "ÙƒØªØ§Ø¨", "Ù‚Ù„Ù…", "ÙˆØ±Ù‚Ø©", "Ø¨Ø§Ø¨", "Ù†Ø§ÙØ°Ø©", "Ø³ÙŠØ§Ø±Ø©", "Ø¨ÙŠØª", "Ø´Ø¬Ø±Ø©", "ÙˆØ±Ø¯Ø©",
            "ØªÙØ§Ø­Ø©", "Ø¨Ø±ØªÙ‚Ø§Ù„", "Ù…ÙˆØ²", "Ù„ÙŠÙ…ÙˆÙ†", "Ø·Ø§ÙˆÙ„Ø©", "ÙƒØ±Ø³ÙŠ", "Ø³Ø±ÙŠØ±", "Ø³Ø§Ø¹Ø©", "ØªÙ„ÙØ§Ø²", "Ù‡Ø§ØªÙ",
            "Ø­Ø§Ø³ÙˆØ¨", "Ø´Ø§Ø´Ø©", "ÙØ£Ø±Ø©", "Ù„ÙˆØ­Ø©", "Ù†Ø¸Ø§Ø±Ø©", "Ø­Ù‚ÙŠØ¨Ø©", "Ø­Ø°Ø§Ø¡", "Ù‚Ù…ÙŠØµ", "Ø¨Ù†Ø·Ù„ÙˆÙ†", "ÙØ³ØªØ§Ù†",
            "Ø³Ø±ÙˆØ§Ù„", "Ù…Ø¹Ø·Ù", "Ù‚Ø¨Ø¹Ø©", "Ø´Ø§Ù„", "Ø³Ø¬Ø§Ø¯Ø©", "ÙˆØ³Ø§Ø¯Ø©", "Ø¨Ø·Ø§Ù†ÙŠØ©", "ØºØ·Ø§Ø¡", "Ù…Ù„Ø¹Ù‚Ø©", "Ø´ÙˆÙƒØ©",
            "Ø³ÙƒÙŠÙ†", "ØµØ­Ù†", "ÙƒØ£Ø³", "Ø§Ø¨Ø±ÙŠÙ‚", "Ø·Ù†Ø¬Ø±Ø©", "Ù…Ù‚Ù„Ø§Ø©", "ÙØ±Ù†", "Ø«Ù„Ø§Ø¬Ø©", "ØºØ³Ø§Ù„Ø©", "Ù…ÙƒÙ†Ø³Ø©",
            "Ù…ÙƒÙ†Ø³Ø©", "Ù…Ø±ÙˆØ­Ø©", "ØªÙƒÙŠÙŠÙ", "Ù…Ø¯ÙØ£Ø©", "Ù…ØµØ¨Ø§Ø­", "Ø¨Ø·Ø§Ø±ÙŠØ©", "Ø´Ø§Ø­Ù†", "Ø³Ù„Ùƒ", "Ù…Ù‚Ø¨Ø³", "Ø²Ø±",
            "Ù…ÙØªØ§Ø­", "Ù‚ÙÙ„", "Ø³Ù„Ø³Ù„Ø©", "Ø­Ù„Ù‚Ø©", "Ø³ÙˆØ§Ø±", "Ø¹Ù‚Ø¯", "Ø®Ø§ØªÙ…", "Ù‚Ø±Ø·", "Ø³Ø§Ø¹Ø©", "Ù…Ø­ÙØ¸Ø©",
            "Ù†Ù‚ÙˆØ¯", "Ø¨Ø·Ø§Ù‚Ø©", "Ø¬ÙˆØ§Ø²", "Ù‡ÙˆÙŠØ©", "Ø±Ø®ØµØ©", "Ø¹Ù‚Ø¯", "ÙˆØ«ÙŠÙ‚Ø©", "Ù…Ù„Ù", "Ù…Ø¬Ù„Ø¯", "Ø¯ÙØªØ±",
            "Ù…Ø°ÙƒØ±", "Ø±Ø³Ø§Ù„Ø©", "Ø¨Ø±ÙŠØ¯", "Ø·Ø§Ø¨Ø¹", "Ø¹Ù„Ø¨Ø©", "ØµÙ†Ø¯ÙˆÙ‚", "Ø³Ù„Ø©", "Ø³Ø·Ù„", "Ø¯Ù„Ùˆ", "Ø®Ø±Ø·ÙˆÙ…",
            "Ù…ÙƒÙ†Ø©", "Ø¢Ù„Ø©", "Ø£Ø¯Ø§Ø©", "Ø¹Ø¯Ø©", "Ù…Ø¹Ø¯Ø©", "Ø¬Ù‡Ø§Ø²", "Ù†Ø¸Ø§Ù…", "Ø¨Ø±Ù†Ø§Ù…Ø¬", "ØªØ·Ø¨ÙŠÙ‚", "Ù…ÙˆÙ‚Ø¹",
            "ØµÙØ­Ø©", "Ø±Ø§Ø¨Ø·", "Ø¹Ù†ÙˆØ§Ù†", "Ø¨Ø±ÙŠØ¯", "ÙƒÙ„Ù…Ø©", "Ø±Ù‚Ù…", "Ø­Ø³Ø§Ø¨", "Ù…Ø¨Ù„Øº", "Ø³Ø¹Ø±", "Ù‚ÙŠÙ…Ø©",
            "Ø³ÙˆÙ‚", "Ù…ØªØ¬Ø±", "Ù…Ø­Ù„", "Ù…ÙƒØªØ¨", "Ø´Ø±ÙƒØ©", "Ù…ØµÙ†Ø¹", "Ù…Ø²Ø±Ø¹Ø©", "Ø­Ù‚Ù„", "Ø¨Ø³ØªØ§Ù†", "Ø­Ø¯ÙŠÙ‚Ø©",
            "Ù…Ù„Ø¹Ø¨", "Ù…Ø³Ø¨Ø­", "Ù†Ø§Ø¯ÙŠ", "ÙÙ†Ø¯Ù‚", "Ù…Ø·Ø¹Ù…", "Ù…Ù‚Ù‡Ù‰", "Ø³ÙˆØ¨Ø±", "ØµÙŠØ¯Ù„ÙŠØ©", "Ù…Ø³ØªØ´ÙÙ‰", "Ø¹ÙŠØ§Ø¯Ø©",
            "Ø¨Ù†Ùƒ", "ØµØ±Ø§Ù", "Ø³ÙØ§Ø±Ø©", "Ù‚Ù†ØµÙ„", "ÙˆØ²Ø§Ø±Ø©", "Ø¯Ø§Ø¦Ø±Ø©", "Ù…Ø¤Ø³Ø³Ø©", "Ø¬Ù…Ø¹ÙŠØ©", "Ù†Ù‚Ø§Ø¨Ø©", "Ø§ØªØ­Ø§Ø¯",
            "Ù„Ø¬Ù†Ø©", "Ù…Ø¬Ù„Ø³", "Ø¨Ø±Ù„Ù…Ø§Ù†", "Ø­ÙƒÙˆÙ…Ø©", "Ø¯ÙˆÙ„Ø©", "Ù…Ø¯ÙŠÙ†Ø©", "Ù‚Ø±ÙŠØ©", "Ø­ÙŠ", "Ø´Ø§Ø±Ø¹", "Ø³Ø§Ø­Ø©",
            "Ù…ÙŠØ¯Ø§Ù†", "Ø¬Ø³Ø±", "Ù†ÙÙ‚", "Ø·Ø±ÙŠÙ‚", "Ø³ÙƒØ©", "Ù…Ø­Ø·Ø©", "Ù…Ø·Ø§Ø±", "Ù…ÙŠÙ†Ø§Ø¡", "Ø³ÙÙŠÙ†Ø©", "Ø·Ø§Ø¦Ø±Ø©",
            "Ù‚Ø·Ø§Ø±", "Ø¨Ø§Øµ", "ØªØ§ÙƒØ³ÙŠ", "Ø¯Ø±Ø§Ø¬Ø©", "Ø¹Ø±Ø¨Ø©", "Ø¬Ø±Ø§ÙØ©", "Ø´Ø§Ø­Ù†Ø©", "Ù…Ù‚Ø·ÙˆØ±Ø©", "Ø±Ø§ÙØ¹Ø©", "Ø­Ø§ÙÙ„Ø©",
            "Ù…ØªØ±Ùˆ", "ØªØ±Ø§Ù…", "Ø¨Ø§Ø®Ø±Ø©", "ÙŠØ®Øª", "ØºÙˆØ§ØµØ©", "ØµØ§Ø±ÙˆØ®", "Ù‚Ù…Ø±", "ÙƒÙˆÙƒØ¨", "Ù†Ø¬Ù…", "Ø´Ù…Ø³",
            "Ù‚Ù…Ø±", "Ø³Ù…Ø§Ø¡", "Ø³Ø­Ø§Ø¨", "Ù…Ø·Ø±", "Ø«Ù„Ø¬", "Ø¨Ø±Ø¯", "Ø±ÙŠØ­", "Ø¹Ø§ØµÙ", "Ø²ÙˆØ§Ø¨Ø¹", "Ø±Ø¹Ø¯",
            "Ø¨Ø±Ù‚", "Ù‚ÙˆØ³", "Ø¶Ø¨Ø§Ø¨", "Ù†Ø¯Ù‰", "Ø·Ù„", "ØµÙ‚ÙŠØ¹", "Ø­Ø±", "Ø¯ÙØ¡", "Ø¨Ø±ÙˆØ¯Ø©", "Ø±Ø·ÙˆØ¨Ø©",
            "Ø¬ÙØ§Ù", "Ø±Ù…Ù„", "ØªØ±Ø§Ø¨", "Ø·ÙŠÙ†", "ØµØ®Ø±", "Ø¬Ø¨Ø§Ù„", "ÙˆØ§Ø¯ÙŠ", "Ù†Ù‡Ø±", "Ø¨Ø­Ø±", "Ø¨Ø­ÙŠØ±Ø©",
            "Ù…Ø­ÙŠØ·", "Ø´Ù„Ø§Ù„", "Ø¹ÙŠÙˆÙ†", "ÙŠÙ†Ø§Ø¨ÙŠØ¹", "Ø¢Ø¨Ø§Ø±", "Ù‚Ù†ÙˆØ§Øª", "Ø³Ø¯ÙˆØ¯", "Ø¬Ø³ÙˆØ±", "Ø£Ù†ÙØ§Ù‚", "Ù…Ø·Ø¨Ø§Øª",
            "Ø¥Ø´Ø§Ø±Ø©", "Ù…Ø±ÙˆØ±", "Ø¯ÙˆØ±ÙŠØ©", "Ø´Ø±Ø·Ø©", "Ø¬ÙŠØ´", "Ù…Ø³ØªÙˆØ¯Ø¹", "Ù…Ø®Ø²Ù†", "Ø³Ø¬Ù†", "Ø³ÙˆØ±", "Ø¨ÙˆØ§Ø¨Ø©",
            "Ø¯Ø±Ø¬", "Ø³Ù„Ù…", "Ù…ØµØ¹Ø¯", "Ø³Ø·Ø­", "Ù‚Ø¨Ùˆ", "Ø¨Ø¯Ø±ÙˆÙ…", "Ø´Ø±ÙØ©", "Ø¨Ù„ÙƒÙˆÙ†Ø©", "Ø­Ø¯ÙŠÙ‚Ø©", "ÙÙ†Ø§Ø¡",
            "Ù…Ù…Ø±", "Ø±Ø¯Ù‡Ø©", "ØµØ§Ù„Ø©", "ØºØ±ÙØ©", "Ù…Ø·Ø¨Ø®", "Ø­Ù…Ø§Ù…", "Ù…ØºØ³Ù„Ø©", "Ù…Ø±Ø­Ø§Ø¶", "Ø­ÙˆØ¶", "Ø¨Ø§Ù†ÙŠÙˆ",
            "Ø¯Ø´", "Ø­Ù†ÙÙŠØ©", "ØµÙ†Ø¨ÙˆØ±", "Ø³Ø®Ø§Ù†", "Ù…Ø¨Ø±Ø¯", "ÙÙ„ØªØ±", "Ù…Ø¶Ø®Ø©", "Ø®Ø²Ø§Ù†", "ØªÙ†Ùƒ", "Ø¨Ø±Ù…ÙŠÙ„",
            "Ø¹Ù„Ø¨Ø©", "Ø²Ø¬Ø§Ø¬Ø©", "ÙƒÙŠØ³", "Ø¹Ù„Ø§Ù‚", "Ø´Ø±ÙŠØ·", "Ø­Ø¨Ù„", "Ø³Ù„Ùƒ", "Ø³Ù„Ø³Ù„Ø©", "Ù‚ÙŠØ¯", "Ø·ÙˆÙ‚",
            "Ø·ÙˆÙ‚", "Ø¹Ù‚Ø§Ù„", "Ø±Ø¨Ø·Ø©", "Ø±Ø¨Ø§Ø·", "Ø´Ø±ÙŠØ·", "Ù„ÙØ§ÙØ©", "Ù„ÙØ©", "ÙƒØ±Ø©", "Ù…ÙƒØ¹Ø¨", "Ù‡Ø±Ù…",
            "Ø¯Ø§Ø¦Ø±Ø©", "Ù…Ø±Ø¨Ø¹", "Ù…Ø³ØªØ·ÙŠÙ„", "Ù…Ø«Ù„Ø«", "Ø´ÙƒÙ„", "ØµÙˆØ±Ø©", "Ø±Ø³Ù…", "Ù„ÙˆØ­Ø©", "ØªÙ…Ø«Ø§Ù„", "Ù†Ø­Øª",
            "Ø²Ø®Ø±ÙØ©", "ØªÙ„ÙˆÙŠÙ†", "Ø·Ù„Ø§Ø¡", "Ø¯Ù‡Ø§Ù†", "ÙˆØ±Ù†ÙŠØ´", "ØµÙ…Øº", "Ù„ØµÙ‚", "Ù„Ø²Ù‚", "ØºØ±Ø§Ø¡", "Ø´Ø±ÙŠØ·",
            "Ø¯Ø¨ÙˆØ³", "Ù…Ø³Ù…Ø§Ø±", "Ø¨Ø±ØºÙŠ", "ØµØ§Ù…ÙˆÙ„Ø©", "Ù…ÙØªØ§Ø­", "Ù…Ù‚Øµ", "Ù…Ø¨Ø±Ø¯", "Ù…Ù†Ø´Ø§Ø±", "ÙØ£Ø³", "Ø¹ØªÙ„Ø©",
            "Ù…Ø·Ø±Ù‚Ø©", "Ø²Ø±Ø§Ø¯ÙŠØ©", "ÙƒÙ…Ø§Ø´Ø©", "Ù…Ù„Ø²Ù…Ø©", "Ù…Ø«Ù‚Ø§Ø¨", "Ù…Ø«Ù‚Ø¨", "Ù…Ù†ÙØ§Ø®", "Ù…Ø³Ø¯Ø³", "Ø¨Ù†Ø¯Ù‚ÙŠØ©", "Ù…Ø³Ø¯Ø³",
            "Ø³ÙŠÙ", "Ø®Ù†Ø¬Ø±", "Ø¯Ø±Ø¹", "Ø®ÙˆØ°Ø©", "Ø³ØªØ±Ø©", "Ø­Ø²Ø§Ù…", "Ø´Ù†Ø·Ø©", "Ø¬Ø±Ø§Ø¨", "ØºÙ…Ø¯", "Ù‚Ø±Ø§Ø¨",
            "Ø·Ø¨Ù„", "Ù…Ø²Ù…Ø§Ø±", "Ø¹ÙˆØ¯", "Ù‚ÙŠØ«Ø§Ø±", "Ø¨ÙŠØ§Ù†Ùˆ", "ÙƒÙ…Ø§Ù†", "Ù†Ø§ÙŠ", "ØµØ±Ù†Ø§ÙŠ", "Ø¯Ù", "Ø±Ù‚",
            "ØµÙˆØª", "Ù„Ø­Ù†", "Ù†ØºÙ…Ø©", "Ø¥ÙŠÙ‚Ø§Ø¹", "Ù…ÙˆØ³ÙŠÙ‚Ù‰", "ØºÙ†Ø§Ø¡", "Ø±Ù‚Øµ", "ØªÙ…Ø«ÙŠÙ„", "Ù…Ø³Ø±Ø­", "Ø³ÙŠÙ†Ù…Ø§",
            "ØªÙ„ÙØ§Ø²", "Ø±Ø§Ø¯ÙŠÙˆ", "Ù…Ø°ÙŠØ§Ø¹", "Ø¬Ø±Ø³", "Ø¨ÙˆÙ‚", "ØµÙØ§Ø±Ø©", "Ù…ÙŠÙƒØ±ÙÙˆÙ†", "Ù…ÙƒØ¨Ø±", "Ø³Ù…Ø§Ø¹Ø©", "Ø±Ø£Ø³",
            "ÙŠØ¯", "Ø±Ø¬Ù„", "Ù‚Ø¯Ù…", "Ø¥ØµØ¨Ø¹", "Ø¸ÙØ±", "ÙƒÙ", "ÙƒØ¹Ø¨", "Ù‚Ø¯Ù…", "Ø³Ø§Ù‚", "Ø±ÙƒØ¨Ø©",
            "ÙØ®Ø°", "ÙˆØ±Ùƒ", "Ø¸Ù‡Ø±", "Ø¨Ø·Ù†", "ØµØ¯Ø±", "ÙƒØªÙ", "Ø¹Ù†Ù‚", "Ø±Ø£Ø³", "ÙˆØ¬Ù‡", "Ø¹ÙŠÙ†",
            "Ø£Ù†Ù", "ÙÙ…", "Ø£Ø°Ù†", "Ø´ÙØ©", "Ù„Ø³Ø§Ù†", "Ø³Ù†", "Ø¶Ø±Ø³", "Ù„Ø«Ø©", "Ø­Ù†Ø¬Ø±Ø©", "Ø±Ù‚Ø¨Ø©",
            "Ø­Ù„Ù‚", "ØµØ¯Ø±", "Ù‚Ù„Ø¨", "Ø±Ø¦Ø©", "ÙƒØ¨Ø¯", "Ù…Ø¹Ø¯Ø©", "Ø£Ù…Ø¹Ø§Ø¡", "ÙƒÙ„Ù‰", "Ù…Ø«Ø§Ù†Ø©", "Ø¯Ù…Ø§Øº",
            "Ø¹ØµØ¨", "Ø¹Ø¸Ù…", "Ø¹Ø¶Ù„", "Ø¬Ù„Ø¯", "Ø´Ø¹Ø±", "Ø¸ÙØ±", "Ø¯Ù…", "Ø¹Ø±Ù‚", "Ø¯Ù…ÙˆØ¹", "Ù„Ø¹Ø§Ø¨",
            "Ø£Ø¨", "Ø£Ù…", "Ø§Ø¨Ù†", "Ø¨Ù†Øª", "Ø£Ø®", "Ø£Ø®Øª", "Ø¬Ø¯", "Ø¬Ø¯Ø©", "Ø­ÙÙŠØ¯", "Ø­ÙÙŠØ¯Ø©",
            "Ø¹Ù…", "Ø¹Ù…Ø©", "Ø®Ø§Ù„", "Ø®Ø§Ù„Ø©", "Ø§Ø¨Ù†", "Ø§Ø¨Ù†Ø©", "Ø²ÙˆØ¬", "Ø²ÙˆØ¬Ø©", "ØµÙ‡Ø±", "ÙƒÙ†Ø©",
            "ØµØ¯ÙŠÙ‚", "ØµØ¯ÙŠÙ‚Ø©", "Ø¬Ø§Ø±", "Ø¬Ø§Ø±Ø©", "Ø²Ù…ÙŠÙ„", "Ø²Ù…ÙŠÙ„Ø©", "Ù…Ø¹Ù„Ù…", "Ù…Ø¹Ù„Ù…Ø©", "Ø·Ø§Ù„Ø¨", "Ø·Ø§Ù„Ø¨Ø©",
            "Ø¯ÙƒØªÙˆØ±", "Ù…Ù…Ø±Ø¶", "Ù…Ù…Ø±Ø¶Ø©", "Ù…Ù‡Ù†Ø¯Ø³", "Ø·Ø¨ÙŠØ¨", "Ù…Ø­Ø§Ù…", "Ù‚Ø§Ø¶ÙŠ", "Ø´Ø±Ø·ÙŠ", "Ø¬Ù†Ø¯ÙŠ", "Ø±Ø¦ÙŠØ³",
            "Ù…Ø¯ÙŠØ±", "Ù…ÙˆØ¸Ù", "Ø¹Ø§Ù…Ù„", "Ø³Ø§Ø¦Ù‚", "Ø·Ø¨Ø§Ø®", "Ø®Ø¨Ø§Ø²", "Ù†Ø¬Ø§Ø±", "Ø­Ø¯Ø§Ø¯", "Ø¨Ù†Ø§Ø¡", "Ø³Ø¨Ø§Ùƒ",
            "ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ", "Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ", "Ø­Ø¯Ø§Ø¯", "Ø®ÙŠØ§Ø·", "ØªØ§Ø¬Ø±", "Ø¨Ø§Ø¦Ø¹", "Ø²Ø¨ÙˆÙ†", "Ø¹Ù…ÙŠÙ„", "Ø²Ø§Ø¦Ø±", "Ø¶ÙŠÙ",
            "Ø³Ø§Ø¦Ø­", "Ù…Ø±Ø´Ø¯", "Ø­Ø§Ø¬", "Ù…Ø¹ØªÙ…Ø±", "Ù…ØµÙ„", "Ù‚Ø§Ø±Ø¦", "ÙƒØ§ØªØ¨", "Ø´Ø§Ø¹Ø±", "ÙÙ†Ø§Ù†", "Ø±ÙŠØ§Ø¶ÙŠ",
            "Ù„Ø§Ø¹Ø¨", "Ø­ÙƒÙ…", "Ù…Ø¯Ø±Ø¨", "Ù…ØªØ³Ø§Ø¨Ù‚", "ÙØ§Ø¦Ø²", "Ø®Ø§Ø³Ø±", "Ù…ØªÙØ±Ø¬", "Ø¬Ù…Ù‡ÙˆØ±", "Ù†Ø§Ø³", "Ø´Ø¹Ø¨",
            "Ø£Ù…Ø©", "Ù‚Ø¨ÙŠÙ„Ø©", "Ø¹Ø§Ø¦Ù„Ø©", "Ø£Ø³Ø±Ø©", "ÙØ±Ø¯", "Ø´Ø®Øµ", "Ø¥Ù†Ø³Ø§Ù†", "Ø¨Ø´Ø±", "Ø°ÙƒØ±", "Ø£Ù†Ø«Ù‰",
            "Ø·ÙÙ„", "Ø±Ø¶ÙŠØ¹", "ØµØ¨ÙŠ", "ÙØªÙ‰", "Ø´Ø§Ø¨", "Ø±Ø¬Ù„", "Ø§Ù…Ø±Ø£Ø©", "Ø¹Ø¬ÙˆØ²", "Ø´ÙŠØ®", "Ù…Ø³Ù†"
        ];

        // Ù‚Ø§Ù…ÙˆØ³ Ù…ÙˆØ³Ø¹ Ù„Ù„ØªØ­Ù‚Ù‚
        const DICTIONARY = [...new Set(WORD_LIST)];

        const gameState = {
            targetWord: "",
            currentRow: 0,
            currentGuess: "",
            gameOver: false,
            gameWon: false,
            isMobile: false,
            stats: {
                played: 0,
                wins: 0,
                currentStreak: 0,
                maxStreak: 0,
                guessDistribution: [0, 0, 0, 0, 0, 0, 0, 0]
            }
        };

        // Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
        function init() {
            loadStats();
            loadTheme();
            createGrid();
            createKeyboard();
            startNewGame();
            setupEventListeners();
            
            // Ø¶Ø¨Ø· Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø£ÙˆÙ„ÙŠ
            adjustLayoutForScreen();
        }

        function loadStats() {
            const saved = localStorage.getItem('arwordle_stats');
            if (saved) {
                gameState.stats = JSON.parse(saved);
            }
        }

        function saveStats() {
            localStorage.setItem('arwordle_stats', JSON.stringify(gameState.stats));
        }

        function loadTheme() {
            const isDark = localStorage.getItem('arwordle_dark') === 'true';
            if (isDark) {
                document.body.classList.add('dark-mode');
                document.querySelector('#themeToggle i').className = 'fas fa-sun text-xl';
            }
        }

        function createGrid() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            
            for (let row = 0; row < 8; row++) {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'flex gap-2';
                rowDiv.id = `row-${row}`;
                
                for (let col = 0; col < 5; col++) {
                    const tile = document.createElement('div');
                    tile.className = 'tile';
                    tile.id = `tile-${row}-${col}`;
                    rowDiv.appendChild(tile);
                }
                
                grid.appendChild(rowDiv);
            }
        }

        function createKeyboard() {
            const keyboard = document.getElementById('keyboard');
            keyboard.innerHTML = '';
            
            const isMobile = window.innerWidth <= 768;
            gameState.isMobile = isMobile;
            
            // Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©
            const arabicKeys = [
                ["Ø¶", "Øµ", "Ø«", "Ù‚", "Ù", "Øº", "Ø¹", "Ù‡", "Ø®", "Ø­", "Ø¬", "Ø¯"],
                ["Ø´", "Ø³", "ÙŠ", "Ø¨", "Ù„", "Ø§", "Øª", "Ù†", "Ù…", "Ùƒ", "Ø·"],
                ["Ø°", "Ø¡", "Ø¤", "Ø±", "Ù‰", "Ø©", "Ùˆ", "Ø²", "Ø¸", "âŒ«", "Enter"]
            ];
            
            // Ù„Ù„Ø¬ÙˆØ§Ù„ØŒ Ù†Ù‚Ø³Ù… Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø¥Ù„Ù‰ 4 ØµÙÙˆÙ
            const arabicKeysMobile = [
                ["Ø¶", "Øµ", "Ø«", "Ù‚", "Ù", "Øº", "Ø¹", "Ù‡", "Ø®", "Ø­"],
                ["Ø¬", "Ø¯", "Ø´", "Ø³", "ÙŠ", "Ø¨", "Ù„", "Ø§", "Øª", "Ù†"],
                ["Ù…", "Ùƒ", "Ø·", "Ø°", "Ø¡", "Ø¤", "Ø±", "Ù‰", "Ø©", "Ùˆ"],
                ["Ø²", "Ø¸", "âŒ«", "Enter"]
            ];
            
            const keyboardLayout = isMobile ? arabicKeysMobile : arabicKeys;
            
            keyboardLayout.forEach((row, rowIndex) => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'key-row';
                
                row.forEach((keyChar) => {
                    const key = document.createElement('button');
                    
                    if (keyChar === 'Enter') {
                        key.textContent = 'ØªØ£ÙƒÙŠØ¯';
                        key.className = 'key wide bg-[var(--correct-color)] text-white';
                        key.dataset.key = 'Enter';
                    } else if (keyChar === 'âŒ«') {
                        key.textContent = 'âŒ«';
                        key.className = 'key wide bg-[var(--absent-color)] text-white';
                        key.dataset.key = 'Backspace';
                    } else {
                        key.textContent = keyChar;
                        key.className = 'key';
                        key.dataset.key = keyChar;
                    }
                    
                    key.addEventListener('click', (e) => {
                        e.preventDefault();
                        handleInput(key.dataset.key);
                    });
                    
                    // ØªØ­Ø³ÙŠÙ† Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØªÙŠ ØªØ¹Ù…Ù„ Ø¨Ø§Ù„Ù„Ù…Ø³
                    key.addEventListener('touchstart', (e) => {
                        e.preventDefault();
                        key.style.opacity = '0.8';
                    });
                    
                    key.addEventListener('touchend', (e) => {
                        e.preventDefault();
                        key.style.opacity = '1';
                    });
                    
                    rowDiv.appendChild(key);
                });
                
                keyboard.appendChild(rowDiv);
            });
        }

        function adjustLayoutForScreen() {
            const isMobile = window.innerWidth <= 768;
            
            // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø¥Ø°Ø§ ØªØºÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©
            if (isMobile !== gameState.isMobile) {
                gameState.isMobile = isMobile;
                createKeyboard();
            }
        }

        function startNewGame() {
            // Ø§Ø®ØªÙŠØ§Ø± ÙƒÙ„Ù…Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù…Ù† 5 Ø£Ø­Ø±Ù
            let filteredWords = WORD_LIST.filter(word => word.length === 5);
            
            if (filteredWords.length === 0) {
                filteredWords = ["Ù…Ø¯Ø±Ø³Ø©", "ÙƒØªØ§Ø¨", "Ù‚Ù„Ù…", "ÙˆØ±Ù‚Ø©", "Ø¨Ø§Ø¨"];
            }
            
            gameState.targetWord = filteredWords[Math.floor(Math.random() * filteredWords.length)];
            console.log("Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©:", gameState.targetWord); // Ù„Ø¥Ø²Ø§Ù„Ø© Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± ÙÙŠ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
            
            gameState.currentRow = 0;
            gameState.currentGuess = '';
            gameState.gameOver = false;
            gameState.gameWon = false;
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø´Ø¨ÙƒØ©
            document.querySelectorAll('.tile').forEach(tile => {
                tile.className = 'tile';
                tile.textContent = '';
            });
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
            document.querySelectorAll('.key').forEach(key => {
                if (!key.classList.contains('wide')) {
                    key.className = 'key';
                    key.classList.remove('correct', 'present', 'absent');
                }
            });
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
            document.getElementById('message').textContent = '';
        }

        function handleInput(key) {
            if (gameState.gameOver) return;
            
            if (key === 'Enter') {
                submitGuess();
            } else if (key === 'Backspace') {
                if (gameState.currentGuess.length > 0) {
                    gameState.currentGuess = gameState.currentGuess.slice(0, -1);
                    updateGrid();
                }
            } else if (gameState.currentGuess.length < 5) {
                // Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙÙ‚Ø·
                if (/^[\u0600-\u06FF]$/.test(key)) {
                    gameState.currentGuess += key;
                    updateGrid();
                    
                    // ØªØ£Ø«ÙŠØ± Ø¸Ù‡ÙˆØ± Ø§Ù„Ø­Ø±Ù
                    const tile = document.getElementById(`tile-${gameState.currentRow}-${gameState.currentGuess.length-1}`);
                    if (tile) {
                        tile.classList.add('filled');
                        setTimeout(() => tile.classList.remove('filled'), 100);
                    }
                }
            }
        }

        function updateGrid() {
            for (let i = 0; i < 5; i++) {
                const tile = document.getElementById(`tile-${gameState.currentRow}-${i}`);
                if (tile) {
                    tile.textContent = gameState.currentGuess[i] || '';
                }
            }
        }

        function submitGuess() {
            if (gameState.currentGuess.length !== 5) {
                showMessage('Ø§Ù„ÙƒÙ„Ù…Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 5 Ø£Ø­Ø±Ù');
                shakeRow();
                return;
            }
            
            if (!isValidWord(gameState.currentGuess)) {
                showMessage('Ø§Ù„ÙƒÙ„Ù…Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù‚Ø§Ù…ÙˆØ³');
                shakeRow();
                return;
            }
            
            evaluateGuess();
        }

        function isValidWord(word) {
            return DICTIONARY.includes(word);
        }

        function evaluateGuess() {
            const guess = gameState.currentGuess;
            const target = gameState.targetWord;
            
            const result = Array(5).fill('absent');
            const targetLetters = {};
            
            // Ø¹Ø¯ ØªÙƒØ±Ø§Ø±Ø§Øª Ø§Ù„Ø­Ø±ÙˆÙ ÙÙŠ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©
            for (const letter of target) {
                targetLetters[letter] = (targetLetters[letter] || 0) + 1;
            }
            
            // Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„ØµØ­ÙŠØ­Ø© ÙÙŠ Ø£Ù…Ø§ÙƒÙ†Ù‡Ø§
            for (let i = 0; i < 5; i++) {
                if (guess[i] === target[i]) {
                    result[i] = 'correct';
                    targetLetters[guess[i]]--;
                }
            }
            
            // Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙˆÙ„ÙƒÙ† ÙÙŠ Ø£Ù…Ø§ÙƒÙ† Ù…Ø®ØªÙ„ÙØ©
            for (let i = 0; i < 5; i++) {
                if (result[i] !== 'correct' && targetLetters[guess[i]] > 0) {
                    result[i] = 'present';
                    targetLetters[guess[i]]--;
                }
            }
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø¹ Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
            for (let i = 0; i < 5; i++) {
                const tile = document.getElementById(`tile-${gameState.currentRow}-${i}`);
                const delay = i * 300;
                
                setTimeout(() => {
                    tile.classList.add('flip');
                    setTimeout(() => {
                        tile.classList.add(result[i]);
                        updateKeyboard(guess[i], result[i]);
                    }, 300);
                }, delay);
            }
            
            const won = guess === target;
            
            setTimeout(() => {
                if (won) {
                    gameState.gameWon = true;
                    gameState.gameOver = true;
                    handleWin();
                } else if (gameState.currentRow === 7) {
                    gameState.gameOver = true;
                    handleLoss();
                } else {
                    gameState.currentRow++;
                    gameState.currentGuess = '';
                }
            }, 1800);
        }

        function updateKeyboard(letter, status) {
            const key = document.querySelector(`.key[data-key="${letter}"]`);
            if (!key) return;
            
            if (status === 'correct') {
                key.classList.remove('present', 'absent');
                key.classList.add('correct');
            } else if (status === 'present' && !key.classList.contains('correct')) {
                key.classList.remove('absent');
                key.classList.add('present');
            } else if (status === 'absent' && !key.classList.contains('correct') && !key.classList.contains('present')) {
                key.classList.add('absent');
            }
        }

        function handleWin() {
            showMessage('ğŸ‰ Ø£Ø­Ø³Ù†Øª! Ù„Ù‚Ø¯ ÙØ²Øª!');
            gameState.stats.played++;
            gameState.stats.wins++;
            gameState.stats.currentStreak++;
            gameState.stats.maxStreak = Math.max(gameState.stats.maxStreak, gameState.stats.currentStreak);
            gameState.stats.guessDistribution[gameState.currentRow]++;
            
            saveStats();
            updateStatsDisplay();
            
            setTimeout(() => {
                showStats();
            }, 1500);
        }

        function handleLoss() {
            showMessage(`ğŸ’” Ø§Ù„ÙƒÙ„Ù…Ø© ÙƒØ§Ù†Øª: ${gameState.targetWord}`);
            gameState.stats.played++;
            gameState.stats.currentStreak = 0;
            
            saveStats();
            updateStatsDisplay();
            
            setTimeout(() => {
                showStats();
            }, 1500);
        }

        function showMessage(text) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.classList.add('bounce');
            setTimeout(() => messageEl.classList.remove('bounce'), 500);
        }

        function shakeRow() {
            const row = document.getElementById(`row-${gameState.currentRow}`);
            if (row) {
                row.classList.add('shake');
                setTimeout(() => row.classList.remove('shake'), 500);
            }
        }

        function showStats() {
            updateStatsDisplay();
            document.getElementById('statsModal').classList.remove('hidden');
        }

        function updateStatsDisplay() {
            document.getElementById('playedCount').textContent = gameState.stats.played;
            document.getElementById('winPercent').textContent = gameState.stats.played > 0 
                ? Math.round((gameState.stats.wins / gameState.stats.played) * 100) + '%'
                : '0%';
            document.getElementById('currentStreak').textContent = gameState.stats.currentStreak;
            document.getElementById('maxStreak').textContent = gameState.stats.maxStreak;
            
            const distContainer = document.getElementById('guessDistribution');
            distContainer.innerHTML = '';
            
            const maxDist = Math.max(...gameState.stats.guessDistribution, 1);
            
            gameState.stats.guessDistribution.forEach((count, index) => {
                const bar = document.createElement('div');
                bar.className = 'stats-bar';
                bar.style.width = maxDist > 0 ? `${(count / maxDist) * 100}%` : '0%';
                bar.textContent = `${index + 1}: ${count}`;
                distContainer.appendChild(bar);
            });
        }

        function shareResult() {
            let shareText = `ÙƒÙ„Ù…Ø© ğŸ§©\n`;
            shareText += `Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${gameState.gameWon ? gameState.currentRow + 1 : 'X'}/8\n\n`;
            
            for (let row = 0; row <= gameState.currentRow; row++) {
                for (let col = 0; col < 5; col++) {
                    const tile = document.getElementById(`tile-${row}-${col}`);
                    if (tile.classList.contains('correct')) {
                        shareText += 'ğŸŸ©';
                    } else if (tile.classList.contains('present')) {
                        shareText += 'ğŸŸ¨';
                    } else if (tile.classList.contains('absent')) {
                        shareText += 'â¬›';
                    }
                }
                shareText += '\n';
            }
            
            shareText += '\n#ÙƒÙ„Ù…Ø© #Ù„Ø¹Ø¨Ø©_ÙƒÙ„Ù…Ø©';
            
            if (navigator.share) {
                navigator.share({
                    title: 'ÙƒÙ„Ù…Ø© - Wordle Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(shareText)
                    .then(() => {
                        showMessage('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©!');
                    })
                    .catch(() => {
                        showMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©');
                    });
            }
        }

        function setupEventListeners() {
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¥Ø¯Ø®Ø§Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ÙØ¹Ù„ÙŠØ©
            document.addEventListener('keydown', (e) => {
                if (gameState.gameOver) return;
                
                if (e.key === 'Enter') {
                    e.preventDefault();
                    handleInput('Enter');
                } else if (e.key === 'Backspace' || e.key === 'Delete') {
                    e.preventDefault();
                    handleInput('Backspace');
                } else if (/^[\u0600-\u06FF]$/.test(e.key)) {
                    handleInput(e.key);
                }
            });
            
            // Ø¶Ø¨Ø· Ø§Ù„ØªØ®Ø·ÙŠØ· Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©
            window.addEventListener('resize', adjustLayoutForScreen);
            window.addEventListener('orientationchange', adjustLayoutForScreen);
            
            // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
            document.getElementById('helpBtn').addEventListener('click', () => {
                document.getElementById('helpModal').classList.remove('hidden');
            });
            
            document.getElementById('statsBtn').addEventListener('click', showStats);
            
            document.getElementById('settingsBtn').addEventListener('click', () => {
                document.getElementById('settingsModal').classList.remove('hidden');
            });
            
            document.getElementById('themeToggle').addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                const icon = document.querySelector('#themeToggle i');
                if (document.body.classList.contains('dark-mode')) {
                    icon.className = 'fas fa-sun text-xl';
                    localStorage.setItem('arwordle_dark', 'true');
                } else {
                    icon.className = 'fas fa-moon text-xl';
                    localStorage.setItem('arwordle_dark', 'false');
                }
            });
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
            document.getElementById('closeHelp').addEventListener('click', () => {
                document.getElementById('helpModal').classList.add('hidden');
            });
            
            document.getElementById('closeStats').addEventListener('click', () => {
                document.getElementById('statsModal').classList.add('hidden');
            });
            
            document.getElementById('closeSettings').addEventListener('click', () => {
                document.getElementById('settingsModal').classList.add('hidden');
            });
            
            // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
            document.getElementById('startGameBtn').addEventListener('click', () => {
                document.getElementById('helpModal').classList.add('hidden');
                startNewGame();
            });
            
            document.getElementById('newGameBtn').addEventListener('click', () => {
                document.getElementById('statsModal').classList.add('hidden');
                startNewGame();
            });
            
            document.getElementById('shareBtn').addEventListener('click', shareResult);
            
            document.getElementById('resetStatsBtn').addEventListener('click', () => {
                if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªØŸ')) {
                    gameState.stats = {
                        played: 0,
                        wins: 0,
                        currentStreak: 0,
                        maxStreak: 0,
                        guessDistribution: [0, 0, 0, 0, 0, 0, 0, 0]
                    };
                    saveStats();
                    updateStatsDisplay();
                    showMessage('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª');
                }
            });
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø¨Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.add('hidden');
                    }
                });
            });
        }

        window.addEventListener('load', init);
    </script>
</body>
</html>
