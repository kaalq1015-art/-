<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÙƒÙ„Ù…Ø©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap');
        
        * {
            font-family: 'Tajawal', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --correct-color: #6ca965;
            --present-color: #c8b653;
            --absent-color: #787c7e;
            --default-color: #d3d6da;
            --bg-color: #ffffff;
            --text-color: #000000;
            --border-color: #d3d6da;
            --key-bg: #d3d6da;
            --key-text: #000000;
            --tile-size: 4rem;
            --key-height: 3.2rem;
        }

        .dark-mode {
            --correct-color: #538d4e;
            --present-color: #b59f3b;
            --absent-color: #3a3a3c;
            --default-color: #818384;
            --bg-color: #121213;
            --text-color: #ffffff;
            --border-color: #3a3a3c;
            --key-bg: #818384;
            --key-text: #ffffff;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
            min-height: 100vh;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        .tile {
            width: var(--tile-size);
            height: var(--tile-size);
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: calc(var(--tile-size) * 0.6);
            font-weight: 800;
            user-select: none;
            transition: all 0.3s ease;
            border-radius: 4px;
        }

        @media (max-width: 640px) {
            :root {
                --tile-size: 3rem;
                --key-height: 2.8rem;
            }
        }

        @media (max-width: 480px) {
            :root {
                --tile-size: 2.5rem;
                --key-height: 2.2rem;
            }
        }

        .tile.filled {
            border-color: #878a8c;
            animation: pop 0.1s ease;
        }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .tile.correct {
            background-color: var(--correct-color);
            border-color: var(--correct-color);
            color: white;
        }

        .tile.present {
            background-color: var(--present-color);
            border-color: var(--present-color);
            color: white;
        }

        .tile.absent {
            background-color: var(--absent-color);
            border-color: var(--absent-color);
            color: white;
        }

        .flip {
            animation: flip 0.6s ease;
        }

        @keyframes flip {
            0% { transform: rotateX(0); }
            50% { transform: rotateX(90deg); }
            100% { transform: rotateX(0); }
        }

        .key {
            height: var(--key-height);
            min-width: 40px;
            background-color: var(--key-bg);
            color: var(--key-text);
            border: none;
            border-radius: 6px;
            font-weight: 700;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
            touch-action: manipulation;
            padding: 0 8px;
            margin: 2px;
        }

        .key:hover, .key:active {
            opacity: 0.9;
            transform: scale(0.98);
        }

        .key.wide {
            min-width: 70px;
            font-size: 0.9rem;
        }

        .key.correct {
            background-color: var(--correct-color);
            color: white;
        }

        .key.present {
            background-color: var(--present-color);
            color: white;
        }

        .key.absent {
            background-color: var(--absent-color);
            color: white;
        }

        .shake {
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .bounce {
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
        }

        .stats-bar {
            height: 32px;
            background-color: var(--absent-color);
            color: white;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            margin: 2px 0;
        }

        /* Switch toggle */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: var(--correct-color);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        header {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        h1 {
            font-size: 2rem;
            font-weight: 800;
        }

        .icon-btn {
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
        }

        .icon-btn:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        main {
            padding: 1rem 0.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: calc(100vh - 4rem);
        }

        #message {
            min-height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            padding: 0.5rem;
        }

        #keyboard {
            margin-top: auto;
            padding: 0.5rem;
            width: 100%;
        }

        .key-row {
            display: flex;
            justify-content: center;
            gap: 4px;
            margin-bottom: 8px;
        }

        .modal-content {
            max-height: 90vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header -->
    <header class="flex items-center justify-between px-4 py-4">
        <div class="flex items-center gap-2">
            <button id="helpBtn" class="icon-btn">
                <i class="fas fa-question-circle text-xl"></i>
            </button>
            <button id="statsBtn" class="icon-btn">
                <i class="fas fa-chart-bar text-xl"></i>
            </button>
        </div>
        
        <h1 class="text-2xl font-bold text-center flex-1 px-2">ÙƒÙ„Ù…Ø©</h1>
        
        <div class="flex items-center gap-2">
            <button id="settingsBtn" class="icon-btn">
                <i class="fas fa-cog text-xl"></i>
            </button>
            <button id="themeToggle" class="icon-btn">
                <i class="fas fa-moon text-xl"></i>
            </button>
        </div>
    </header>

    <!-- Game Grid -->
    <main>
        <div id="message" class="mb-2"></div>
        <div id="grid" class="grid grid-rows-8 gap-2 mb-4 flex justify-center"></div>
        
        <!-- Keyboard -->
        <div id="keyboard" class="w-full max-w-2xl mx-auto"></div>
    </main>

    <!-- Modals -->
    <div id="helpModal" class="fixed inset-0 modal-overlay z-50 flex items-center justify-center hidden p-4">
        <div class="bg-[var(--bg-color)] border border-[var(--border-color)] rounded-xl w-full max-w-md modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">ÙƒÙŠÙÙŠØ© Ø§Ù„Ù„Ø¹Ø¨</h2>
                    <button id="closeHelp" class="text-2xl hover:text-[var(--absent-color)] transition">&times;</button>
                </div>
                
                <div class="text-center">
                    <button id="startGameBtn" class="bg-[var(--correct-color)] text-white px-8 py-3 rounded-lg font-bold hover:opacity-90 transition text-lg w-full">
                        Ø¨Ø¯Ø¡ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="statsModal" class="fixed inset-0 modal-overlay z-50 flex items-center justify-center hidden p-4">
        <div class="bg-[var(--bg-color)] border border-[var(--border-color)] rounded-xl w-full max-w-md">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
                    <button id="closeStats" class="text-2xl hover:text-[var(--absent-color)] transition">&times;</button>
                </div>
                
                <div class="space-y-3">
                    <button id="newGameBtn" class="w-full border-2 border-[var(--border-color)] py-3 rounded-lg font-bold hover:bg-[var(--default-color)] transition text-lg">
                        Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="settingsModal" class="fixed inset-0 modal-overlay z-50 flex items-center justify-center hidden p-4">
        <div class="bg-[var(--bg-color)] border border-[var(--border-color)] rounded-xl w-full max-w-md">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
                    <button id="closeSettings" class="text-2xl hover:text-[var(--absent-color)] transition">&times;</button>
                </div>
                
                <div class="mt-8 text-center">
                    <button id="resetStatsBtn" class="text-red-500 hover:text-red-700 transition text-lg py-2">
                        <i class="fas fa-trash-alt ml-2"></i> Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        const WORD_LIST = [
            "Ù…ÙƒØªØ¨", "ÙƒØªØ§Ø¨", "Ù‚Ù„Ù…", "ÙˆØ±Ù‚Ø©", "Ø¨Ø§Ø¨", "Ù†Ø§ÙØ°Ø©", "Ø³ÙŠØ§Ø±Ø©", "Ø¨ÙŠØª", "Ø´Ø¬Ø±Ø©", "ÙˆØ±Ø¯Ø©",
            "ØªÙØ§Ø­Ø©", "Ù„ÙŠÙ…ÙˆÙ†", "Ø·Ø§ÙˆÙ„Ø©", "ÙƒØ±Ø³ÙŠ", "Ø³Ø±ÙŠØ±", "Ø³Ø§Ø¹Ø©", "ØªÙ„ÙØ§Ø²", "Ù‡Ø§ØªÙ", "Ø­Ø§Ø³ÙˆØ¨", "Ø´Ø§Ø´Ø©"
        ];

        const gameState = {
            targetWord: "",
            currentRow: 0,
            currentGuess: "",
            gameOver: false,
            gameWon: false
        };

        // Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
        function init() {
            createGrid();
            createKeyboard();
            startNewGame();
            setupEventListeners();
        }

        function createGrid() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            
            for (let row = 0; row < 8; row++) {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'flex gap-2';
                rowDiv.id = `row-${row}`;
                
                for (let col = 0; col < 5; col++) {
                    const tile = document.createElement('div');
                    tile.className = 'tile';
                    tile.id = `tile-${row}-${col}`;
                    rowDiv.appendChild(tile);
                }
                
                grid.appendChild(rowDiv);
            }
        }

        function createKeyboard() {
            const keyboard = document.getElementById('keyboard');
            keyboard.innerHTML = '';
            
            // Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø³ÙŠØ·Ø©
            const arabicKeys = [
                ["Ø¶", "Øµ", "Ø«", "Ù‚", "Ù", "Øº", "Ø¹", "Ù‡", "Ø®", "Ø­", "Ø¬", "Ø¯"],
                ["Ø´", "Ø³", "ÙŠ", "Ø¨", "Ù„", "Ø§", "Øª", "Ù†", "Ù…", "Ùƒ", "Ø·"],
                ["Enter", "Ø°", "Ø¡", "Ø¤", "Ø±", "Ù‰", "Ø©", "Ùˆ", "Ø²", "Ø¸", "âŒ«"]
            ];
            
            arabicKeys.forEach((row) => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'key-row';
                
                row.forEach((keyChar) => {
                    const key = document.createElement('button');
                    
                    if (keyChar === 'Enter') {
                        key.textContent = 'ØªØ£ÙƒÙŠØ¯';
                        key.className = 'key wide bg-[#6ca965] text-white';
                        key.dataset.key = 'Enter';
                    } else if (keyChar === 'âŒ«') {
                        key.textContent = 'âŒ«';
                        key.className = 'key wide bg-[#818384] text-white';
                        key.dataset.key = 'Backspace';
                    } else {
                        key.textContent = keyChar;
                        key.className = 'key';
                        key.dataset.key = keyChar;
                    }
                    
                    key.addEventListener('click', () => {
                        handleInput(key.dataset.key);
                    });
                    
                    rowDiv.appendChild(key);
                });
                
                keyboard.appendChild(rowDiv);
            });
        }

        function startNewGame() {
            // Ø§Ø®ØªÙŠØ§Ø± ÙƒÙ„Ù…Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
            const words = WORD_LIST.filter(word => word.length === 5);
            gameState.targetWord = words[Math.floor(Math.random() * words.length)];
            
            gameState.currentRow = 0;
            gameState.currentGuess = '';
            gameState.gameOver = false;
            gameState.gameWon = false;
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø´Ø¨ÙƒØ©
            document.querySelectorAll('.tile').forEach(tile => {
                tile.className = 'tile';
                tile.textContent = '';
            });
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
            document.querySelectorAll('.key').forEach(key => {
                if (!key.classList.contains('wide')) {
                    key.className = 'key';
                    key.classList.remove('correct', 'present', 'absent');
                }
            });
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
            document.getElementById('message').textContent = '';
        }

        function handleInput(key) {
            if (gameState.gameOver) return;
            
            if (key === 'Enter') {
                submitGuess();
            } else if (key === 'Backspace') {
                if (gameState.currentGuess.length > 0) {
                    gameState.currentGuess = gameState.currentGuess.slice(0, -1);
                    updateGrid();
                }
            } else if (gameState.currentGuess.length < 5) {
                gameState.currentGuess += key;
                updateGrid();
            }
        }

        function updateGrid() {
            for (let i = 0; i < 5; i++) {
                const tile = document.getElementById(`tile-${gameState.currentRow}-${i}`);
                if (tile) {
                    tile.textContent = gameState.currentGuess[i] || '';
                }
            }
        }

        function submitGuess() {
            if (gameState.currentGuess.length !== 5) {
                showMessage('Ø§Ù„ÙƒÙ„Ù…Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 5 Ø£Ø­Ø±Ù');
                shakeRow();
                return;
            }
            
            evaluateGuess();
        }

        function evaluateGuess() {
            const guess = gameState.currentGuess;
            const target = gameState.targetWord;
            
            const result = Array(5).fill('absent');
            const targetLetters = {};
            
            for (const letter of target) {
                targetLetters[letter] = (targetLetters[letter] || 0) + 1;
            }
            
            for (let i = 0; i < 5; i++) {
                if (guess[i] === target[i]) {
                    result[i] = 'correct';
                    targetLetters[guess[i]]--;
                }
            }
            
            for (let i = 0; i < 5; i++) {
                if (result[i] !== 'correct' && targetLetters[guess[i]] > 0) {
                    result[i] = 'present';
                    targetLetters[guess[i]]--;
                }
            }
            
            for (let i = 0; i < 5; i++) {
                const tile = document.getElementById(`tile-${gameState.currentRow}-${i}`);
                const delay = i * 300;
                
                setTimeout(() => {
                    tile.classList.add('flip');
                    setTimeout(() => {
                        tile.classList.add(result[i]);
                        updateKeyboard(guess[i], result[i]);
                    }, 300);
                }, delay);
            }
            
            const won = guess === target;
            
            setTimeout(() => {
                if (won) {
                    gameState.gameWon = true;
                    gameState.gameOver = true;
                    showMessage('ğŸ‰ Ø£Ø­Ø³Ù†Øª! Ù„Ù‚Ø¯ ÙØ²Øª!');
                } else if (gameState.currentRow === 7) {
                    gameState.gameOver = true;
                    showMessage(`ğŸ’” Ø§Ù„ÙƒÙ„Ù…Ø© ÙƒØ§Ù†Øª: ${gameState.targetWord}`);
                } else {
                    gameState.currentRow++;
                    gameState.currentGuess = '';
                }
            }, 1800);
        }

        function updateKeyboard(letter, status) {
            const key = document.querySelector(`.key[data-key="${letter}"]`);
            if (!key) return;
            
            if (status === 'correct') {
                key.classList.remove('present', 'absent');
                key.classList.add('correct');
            } else if (status === 'present' && !key.classList.contains('correct')) {
                key.classList.remove('absent');
                key.classList.add('present');
            } else if (status === 'absent' && !key.classList.contains('correct') && !key.classList.contains('present')) {
                key.classList.add('absent');
            }
        }

        function showMessage(text) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.classList.add('bounce');
            setTimeout(() => messageEl.classList.remove('bounce'), 500);
        }

        function shakeRow() {
            const row = document.getElementById(`row-${gameState.currentRow}`);
            if (row) {
                row.classList.add('shake');
                setTimeout(() => row.classList.remove('shake'), 500);
            }
        }

        function setupEventListeners() {
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¥Ø¯Ø®Ø§Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ÙØ¹Ù„ÙŠØ©
            document.addEventListener('keydown', (e) => {
                if (gameState.gameOver) return;
                
                if (e.key === 'Enter') {
                    handleInput('Enter');
                } else if (e.key === 'Backspace') {
                    handleInput('Backspace');
                } else if (e.key.length === 1) {
                    handleInput(e.key);
                }
            });
            
            // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
            document.getElementById('helpBtn').addEventListener('click', () => {
                document.getElementById('helpModal').classList.remove('hidden');
            });
            
            document.getElementById('statsBtn').addEventListener('click', () => {
                document.getElementById('statsModal').classList.remove('hidden');
            });
            
            document.getElementById('settingsBtn').addEventListener('click', () => {
                document.getElementById('settingsModal').classList.remove('hidden');
            });
            
            document.getElementById('themeToggle').addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                const icon = document.querySelector('#themeToggle i');
                if (document.body.classList.contains('dark-mode')) {
                    icon.className = 'fas fa-sun text-xl';
                } else {
                    icon.className = 'fas fa-moon text-xl';
                }
            });
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
            document.getElementById('closeHelp').addEventListener('click', () => {
                document.getElementById('helpModal').classList.add('hidden');
            });
            
            document.getElementById('closeStats').addEventListener('click', () => {
                document.getElementById('statsModal').classList.add('hidden');
            });
            
            document.getElementById('closeSettings').addEventListener('click', () => {
                document.getElementById('settingsModal').classList.add('hidden');
            });
            
            // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
            document.getElementById('startGameBtn').addEventListener('click', () => {
                document.getElementById('helpModal').classList.add('hidden');
                startNewGame();
            });
            
            document.getElementById('newGameBtn').addEventListener('click', () => {
                document.getElementById('statsModal').classList.add('hidden');
                startNewGame();
            });
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø¨Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.add('hidden');
                    }
                });
            });
        }

        window.addEventListener('load', init);
    </script>
</body>
</html>
